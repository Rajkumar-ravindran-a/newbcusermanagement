"use strict";(self.webpackChunkbcusermanagement=self.webpackChunkbcusermanagement||[]).push([[994],{8959:(e,r,a)=>{a.r(r),a.d(r,{default:()=>h});var s=a(3892),t=a(899),o=a(3934),n=a(5293),l=a(728),i=a(94),d=a(4673),c=a(4957),u=a(5043),b=a(7488),p=a(579);const g=t.Ik().shape({brokerName:t.Yj().required("Broker Name is required"),grossFund:t.ai().typeError("Gross Fund must be a number").required("Gross Fund is required"),arbitrageFund:t.ai().typeError("arbitrageFund must be a number").required("arbitrageFund is required")}),m=["Broker Name","Start Date","Release Date","Gross Fund","Arbitrage Fund","Total Fund","Prop Fund","Action"],h=()=>{const[e,r]=(0,u.useState)([]),a=async()=>{try{const a=await c.A.get("/getAllBroker");if(200===a.status){var e;console.log(a.data.data);const s=null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data.map((e=>({"Broker Name":e.brokerName,"Start Date":e.startDate||"N/A","Release Date":e.releaseDate||"N/A","Gross Fund":e.grossfund||"-","Arbitrage Fund":e.arbitragefund||"-","Prop Fund":e.propfund||"-","Total Fund":e.grossfund+e.arbitragefund||"-",Action:(0,p.jsx)("div",{className:"action-buttons",children:(0,p.jsx)(l.T,{onPress:()=>t(e),size:"small",className:"submit-btn",isDisabled:3===e.status,children:3===e.status?"Released":"Release"},"release-".concat(e.id))},"action-".concat(e.id))})));r(s)}}catch(a){console.error(a),b.oR.error("Error fetching broker data.")}},t=async e=>{try{200===(await c.A.put("/releaseBroker/".concat(e.id,"/3"))).status&&(b.oR.success("Released broker: ".concat(e.brokerName)),a())}catch(r){console.error(r),b.oR.error("Error releasing broker.")}};(0,u.useEffect)((()=>{(async()=>{await a()})()}),[]);return(0,p.jsx)(n.A,{pageTitle:"Brokers",pageSubtitle:"Add, view and release brokers",children:(0,p.jsx)(i.Z,{className:"settings-mainCard",children:(0,p.jsxs)(i.Z,{children:[(0,p.jsx)(s.l1,{initialValues:{brokerName:"",grossFund:"",arbitrageFund:"",propFund:""},validationSchema:g,onSubmit:async(e,r)=>{let{resetForm:s}=r;try{200===(await c.A.post("/createBroker",e)).status&&(b.oR.success("Broker added successfully."),a(),s())}catch(t){b.oR.error("Error adding broker.")}},children:e=>{let{values:r,errors:a,touched:t,handleChange:o,handleBlur:n,setFieldValue:i}=e;return(0,p.jsxs)(s.lV,{className:"broker-form flex gap-3",children:[(0,p.jsx)("div",{className:"flex-1",children:(0,p.jsx)(d.r,{name:"brokerName",label:"Broker Name",value:r.brokerName||"",onChange:e=>{const r=e.target.value.toUpperCase();i("brokerName",r)},onBlur:n,status:t.brokerName&&a.brokerName?"error":void 0,helperText:t.brokerName&&a.brokerName})}),(0,p.jsx)("div",{className:"flex-1",children:(0,p.jsx)(d.r,{name:"grossFund",label:"Gross Fund",value:r.grossFund||"",onChange:e=>{const r=e.target.value.replace(/[^0-9]/g,"");i("grossFund",r)},onBlur:n,status:t.grossFund&&a.grossFund?"error":void 0,helperText:t.grossFund&&a.grossFund})}),(0,p.jsx)("div",{className:"flex-1",children:(0,p.jsx)(d.r,{name:"arbitrageFund",label:"Arbitrage Fund",value:r.arbitrageFund||"",onChange:e=>{const r=e.target.value.replace(/[^0-9]/g,"");i("arbitrageFund",r)},onBlur:n,status:t.arbitrageFund&&a.arbitrageFund?"error":void 0,helperText:t.arbitrageFund&&a.arbitrageFund})}),(0,p.jsx)("div",{className:"flex-1",children:(0,p.jsx)(d.r,{name:"propFund",label:"Prop Fund",value:r.propFund||"",onChange:e=>{const r=e.target.value.replace(/[^0-9]/g,"");i("propFund",r)},onBlur:n,status:t.propFund&&a.propFund?"error":void 0,helperText:t.propFund&&a.propFund})}),(0,p.jsx)(l.T,{type:"submit",className:"submit-btn",children:"Add Broker"})]})}}),(0,p.jsx)("div",{className:"mt-4",children:(0,p.jsx)(o.A,{title:m,tableData:e})})]})})})}},3934:(e,r,a)=>{a.d(r,{A:()=>m});var s=a(5043),t=a(9650),o=a(1596),n=a(1806),l=a(4882),i=a(8076),d=a(39),c=a(8093),u=a(3460),b=a(6519),p=a(728),g=a(579);const m=e=>{let{title:r=[],tableData:a=[],renderAction:m}=e;const[h,k]=(0,s.useState)(0),[v,F]=(0,s.useState)(5),[x,j]=(0,s.useState)({key:"",direction:"asc"}),A=s.useMemo((()=>x.key?[...a].sort(((e,r)=>e[x.key]<r[x.key]?"asc"===x.direction?-1:1:e[x.key]>r[x.key]?"asc"===x.direction?1:-1:0)):a),[a,x]).slice(h*v,h*v+v);return(0,g.jsxs)(t.A,{component:o.A,className:"custom",children:[(0,g.jsxs)(n.A,{children:[(0,g.jsx)(l.A,{children:(0,g.jsx)(i.A,{children:r.map(((e,r)=>(0,g.jsx)(d.A,{align:"center",sx:{fontWeight:"bold"},children:(0,g.jsx)(c.A,{active:x.key===e.toLowerCase(),direction:x.key===e.toLowerCase()?x.direction:"asc",onClick:()=>{return r=e.toLowerCase(),void j((e=>{const a=e.key===r&&"asc"===e.direction;return{key:r,direction:a?"desc":"asc"}}));var r},children:e})},r)))})}),(0,g.jsxs)(u.A,{children:[A.map(((e,r)=>(0,g.jsx)(i.A,{children:Object.keys(e).map(((a,s)=>["status","id","brokerId","fundAllocated"].includes(a)?null:(0,g.jsx)(d.A,{align:"center",children:"action"===a&&m?(0,g.jsx)(p.T,{isDisabled:3===e.status,onPress:()=>{return r=e.status,a=e.id,void(1===r?m(a):m());var r,a},children:1===e.status?"Release":"Released"}):e[a]},"".concat(r,"-").concat(s))))},r))),A&&0===A.length&&(0,g.jsx)(i.A,{style:{textAlign:"center"},children:(0,g.jsx)(d.A,{colSpan:r.length,className:"middle-noData",children:"No data found."})})]})]}),(0,g.jsx)(b.A,{component:"div",count:a.length,page:h,onPageChange:(e,r)=>{k(r)},rowsPerPage:v,onRowsPerPageChange:e=>{F(parseInt(e.target.value,10)),k(0)},rowsPerPageOptions:[5,10,15]})]})}},4957:(e,r,a)=>{a.d(r,{A:()=>t});const s=a(9722).A.create({baseURL:"http://43.204.150.47:8000",timeout:5e3});s.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e)),(e=>(console.error("Request Interceptor Error:",e),Promise.reject(e)))),s.interceptors.response.use((e=>(console.log("Response Interceptor: Response received"),e)),(e=>(e.response&&401===e.response.status?console.error("Response Interceptor: Unauthorized access - Redirecting to login"):console.error("Response Interceptor Error:",e.message),Promise.reject(e))));const t=s},2464:(e,r,a)=>{a.d(r,{M:()=>n});var s=a(7074),t=a(1389),o=a(2196);function n(e){let{description:r,errorMessage:a,isInvalid:n,validationState:l}=e,{labelProps:i,fieldProps:d}=(0,s.M)(e),c=(0,t.X1)([Boolean(r),Boolean(a),n,l]),u=(0,t.X1)([Boolean(r),Boolean(a),n,l]);return d=(0,o.v)(d,{"aria-describedby":[c,u,e["aria-describedby"]].filter(Boolean).join(" ")||void 0}),{labelProps:i,fieldProps:d,descriptionProps:{id:c},errorMessageProps:{id:u}}}},7074:(e,r,a)=>{a.d(r,{M:()=>o});var s=a(1389),t=a(4962);function o(e){let{id:r,label:a,"aria-labelledby":o,"aria-label":n,labelElementType:l="label"}=e;r=(0,s.Bi)(r);let i=(0,s.Bi)(),d={};return a?(o=o?"".concat(i," ").concat(o):i,d={id:i,htmlFor:"label"===l?r:void 0}):o||n||console.warn("If you do not provide a visible label, you must specify an aria-label or aria-labelledby attribute for accessibility"),{labelProps:d,fieldProps:(0,t.b)({id:r,"aria-label":n,"aria-labelledby":o})}}}}]);
//# sourceMappingURL=994.dccfe840.chunk.js.map