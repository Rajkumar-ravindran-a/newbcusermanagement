"use strict";(self.webpackChunkbcusermanagement=self.webpackChunkbcusermanagement||[]).push([[906],{7131:(e,s,r)=>{r.d(s,{A:()=>n});var a=r(4449),t=(r(5043),r(7353)),l=r(579);const i={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:"1rem"},n=e=>{let{open:s,handleClose:r,children:n}=e;return(0,l.jsx)(a.A,{open:s,onClose:r,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,l.jsx)(t.A,{sx:i,children:n})})}},9525:(e,s,r)=>{r.r(s),r.d(s,{default:()=>L});var a=r(5043),t=r(8330),l=r(1045),i=r(5865),n=r(7392),o=r(9650),d=r(1806),c=r(4882),u=r(8076),m=r(39),h=r(3460),p=r(7784),x=r(9135),j=r(5051),v=r(4670),A=r(5732),b=r(247),N=r(5218),f=r(4051),g=r(579);const y=[{name:"Name",key:"name"},{name:"User ID",key:"id"},{name:"Role",key:"role"},{name:"Status",key:"userStatus"},{name:"Phone Number",key:"phoneNumber"},{name:"Actions",key:"actions"}],w=e=>{let{Userdata:s,onUpdateClick:r,onDeleteClick:t}=e;const[w,U]=(0,a.useState)(1),[C,R]=(0,a.useState)(5),k=(w-1)*C,S=k+C,E=s.slice(k,S),D=(e,s)=>{var a,o,d,c;const u=e[s]||"N/A";switch(s){case"id":return(0,g.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.id});case"name":return(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,g.jsx)(l.A,{src:e.avatar,alt:e.firstName,style:{marginRight:"10px"},children:(null===(a=e.firstName)||void 0===a||null===(o=a.charAt(0))||void 0===o?void 0:o.toUpperCase())||""}),(0,g.jsx)("div",{children:(0,g.jsx)(i.A,{variant:"body1",children:(null===(d=e.firstName)||void 0===d?void 0:d.toUpperCase())+" "+(null===(c=e.lastName)||void 0===c?void 0:c.toUpperCase())})})]});case"role":return(0,g.jsx)("div",{children:(0,g.jsx)(i.A,{variant:"body1",children:null===u||void 0===u?void 0:u.toUpperCase()})});case"userStatus":return(0,g.jsx)(v.R,{children:u});case"actions":return(0,g.jsx)("div",{style:{display:"flex",gap:"10px"},children:(0,g.jsxs)(A.A,{children:[(0,g.jsx)(b.b,{children:(0,g.jsx)(n.A,{children:(0,g.jsx)(j.txp,{})})}),(0,g.jsxs)(N.y,{"aria-label":"Action menu",onAction:s=>{"update"===s?r(e):"delete"===s&&t(e.id)},children:[console.log("Action menu "+e.userStatus),(0,g.jsx)(f.Y,{isDisabled:"Deactive"===e.userStatus,children:"Update Employee"},"update"),(0,g.jsx)(f.Y,{isDisabled:"Deactive"===e.userStatus,children:"Delete Employee"},"delete")]})]})});default:return u}};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.A,{children:(0,g.jsxs)(d.A,{sx:{minWidth:650},"aria-label":"user table",children:[(0,g.jsx)(c.A,{children:(0,g.jsx)(u.A,{children:y.map((e=>(0,g.jsx)(m.A,{style:{fontWeight:"300",padding:"10px 15px",color:"#A2A1A8"},children:e.name},e.key)))})}),(0,g.jsx)(h.A,{children:E.length>0?E.map((e=>(0,g.jsx)(u.A,{hover:!0,children:y.map((s=>(0,g.jsx)(m.A,{sx:{padding:"10px 15px",height:"44px",fontSize:"16px",fontWeight:300},children:D(e,s.key)},s.key)))},e.id))):(0,g.jsx)(u.A,{children:(0,g.jsx)(m.A,{colSpan:y.length,align:"center",style:{height:"200px"},children:(0,g.jsx)(i.A,{variant:"h6",children:"No data available"})})})})]})}),(0,g.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"16px"},children:[(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,g.jsx)(i.A,{variant:"body2",children:"Rows per page:"}),(0,g.jsx)(p.A,{type:"number",value:C,onChange:e=>R(parseInt(e.target.value,10)||5),style:{width:"60px"},size:"small"})]}),(0,g.jsx)(x.A,{count:Math.ceil(s.length/C),page:w,onChange:(e,s)=>{U(s)},color:"primary"})]})]})};var U=r(7561),C=r(9190),R=r(2268),k=r(8988),S=r(1906),E=r(1787),D=r(7131),I=r(3892),q=r(899),P=r(7488),z=r(4957),W=r(5394),Y=r(94);const L=()=>{const e=localStorage.getItem("token"),[s,r]=(0,a.useState)([]),[l,o]=(0,a.useState)(""),[d,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),[h,x]=(0,a.useState)({firstName:"",lastName:"",email:"",role:"",password:"",phonenumber:""}),j=async()=>{try{const s=await z.A.get("/users",{headers:{Authorization:"bearer ".concat(e)}});200===s.status&&r(s.data)}catch(s){console.error("Error fetching users:",s)}};(0,a.useEffect)((()=>{j()}),[]);const v=s.filter((e=>{const s=l.toLowerCase();return e.firstName.toLowerCase().includes(s)||e.lastName.toLowerCase().includes(s)})),A=q.Ik({firstName:q.Yj().required("First Name is required"),lastName:q.Yj().required("Last Name is required"),email:q.Yj().email("Invalid email format").required("Email is required"),role:q.ai().required("Role is required"),phonenumber:q.Yj().required("Mobile number is required"),password:u?q.Yj().notRequired():q.Yj().required("Password is required")}),b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(x({id:e.id,firstName:e.firstName,lastName:e.lastName,email:e.email,phonenumber:e.phoneNumber,role:"Dealer"===e.role?2:3,password:""}),m(!0)):(x({firstName:"",lastName:"",email:"",role:"",password:"",phonenumber:""}),m(!1)),c(!0)};return(0,g.jsxs)(t.A,{pageTitle:"All users",pageSubtitle:"Manage user details",children:[(0,g.jsxs)(D.A,{open:d,handleClose:()=>c(!1),children:[(0,g.jsx)(i.A,{variant:"h6",className:"mb-2",children:u?"Update User":"Add User"}),(0,g.jsx)(I.l1,{initialValues:h,validationSchema:A,onSubmit:async s=>{try{if(console.log("/updateUser/".concat(s.id),"======"),u){200===(await z.A.put("/updateUser/".concat(s.id),s,{headers:{Authorization:"bearer ".concat(e)}})).status&&(P.oR.success("User updated successfully"),j(),c(!1))}else{200===(await z.A.post("/register",s,{headers:{Authorization:"bearer ".concat(e)}})).status&&(P.oR.success("User added successfully"),j(),c(!1))}}catch(i){var r,a,t,l;console.error("Error submitting user:",null===i||void 0===i||null===(r=i.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.detail),P.oR.error(null===i||void 0===i||null===(t=i.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.detail)}},enableReinitialize:!0,children:e=>{let{errors:s,touched:r,setFieldValue:a}=e;return(0,g.jsxs)(I.lV,{children:[(0,g.jsxs)("div",{className:"flex gap-4 mb-3",children:[(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)(I.D0,{name:"firstName",as:p.A,label:"First Name",placeholder:"Enter First Name",fullWidth:!0,inputProps:{style:{textTransform:"uppercase"}}}),r.firstName&&s.firstName&&(0,g.jsx)("div",{className:"text-red-500 text-sm",children:s.firstName})]}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)(I.D0,{name:"lastName",as:p.A,label:"Last Name",placeholder:"Enter Last Name",fullWidth:!0,inputProps:{style:{textTransform:"uppercase"}}}),r.lastName&&s.lastName&&(0,g.jsx)("div",{className:"text-red-500 text-sm",children:s.lastName})]})]}),(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)(I.D0,{name:"email",type:"email",as:p.A,label:"Email",placeholder:"Enter Your Email",fullWidth:!0,disabled:u}),r.email&&s.email&&(0,g.jsx)("div",{className:"text-red-500 text-sm",children:s.email})]}),(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)(I.D0,{name:"phonenumber",as:p.A,label:"Phone Number",placeholder:"Enter Phone Number",fullWidth:!0,inputProps:{style:{textTransform:"uppercase"}}}),r.phonenumber&&s.phonenumber&&(0,g.jsx)("div",{className:"text-red-500 text-sm",children:s.phonenumber})]}),(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsxs)(U.A,{fullWidth:!0,children:[(0,g.jsx)(C.A,{children:"Role"}),(0,g.jsxs)(I.D0,{name:"role",as:R.A,label:"Role",onChange:e=>a("role",e.target.value),children:[(0,g.jsx)(k.A,{value:"2",children:"DEALER"}),(0,g.jsx)(k.A,{value:"3",children:"TRADER"})]})]}),r.role&&s.role&&(0,g.jsx)("div",{className:"text-red-500 text-sm",children:s.role})]}),!u&&(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)(I.D0,{name:"password",type:"password",as:p.A,label:"Password",placeholder:"Enter Password",fullWidth:!0}),r.password&&s.password&&(0,g.jsx)("div",{className:"text-red-500 text-sm",children:s.password})]}),(0,g.jsxs)("div",{className:"mt-4 flex gap-4",children:[(0,g.jsx)(S.A,{type:"submit",className:"mr-3 submit-btn",variant:"contained",children:u?"Update User":"Add User"}),(0,g.jsx)(S.A,{variant:"outlined",onClick:()=>c(!1),children:"Cancel"})]})]})}})]}),(0,g.jsx)(Y.Z,{className:"p-3 mt-4 userMainCard",children:(0,g.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)(p.A,{className:"searchUser",placeholder:"Search",value:l,onChange:e=>o(e.target.value),InputProps:{startAdornment:(0,g.jsx)(E.A,{position:"start",children:(0,g.jsx)(n.A,{children:(0,g.jsx)(W.zfp,{})})})},fullWidth:!0}),(0,g.jsx)(S.A,{className:"h-5 mb-4 addUserButton",onClick:()=>b(),variant:"outlined",startIcon:(0,g.jsx)(W.QwN,{}),children:"Add New Users"})]}),(0,g.jsx)(w,{Userdata:v,onUpdateClick:e=>b(e),onDeleteClick:s=>(async s=>{try{200===(await z.A.delete("/deleteUser/".concat(s),{headers:{Authorization:"bearer ".concat(e)}})).status&&(P.oR.success("User deleted successfully"),j())}catch(r){console.error("Error deleting user:",r),P.oR.error("Error deleting user.")}})(s)})]})})]})}},4957:(e,s,r)=>{r.d(s,{A:()=>t});const a=r(9722).A.create({baseURL:"http://localhost:8000",timeout:5e3});a.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e)),(e=>(console.error("Request Interceptor Error:",e),Promise.reject(e)))),a.interceptors.response.use((e=>(console.log("Response Interceptor: Response received"),e)),(e=>(e.response&&401===e.response.status?(window.location.href="/",console.error("Response Interceptor: Unauthorized access - Redirecting to login")):console.error("Response Interceptor Error:",e.message),Promise.reject(e))));const t=a}}]);
//# sourceMappingURL=906.6c4ee05b.chunk.js.map