"use strict";(self.webpackChunkbcusermanagement=self.webpackChunkbcusermanagement||[]).push([[867],{8867:(e,r,a)=>{a.r(r),a.d(r,{default:()=>N});var s=a(5043),n=a(7392),o=a(7784),t=a(1906),l=a(3934),i=a(8967),d=a(4957),u=a(7488),c=a(1787),h=a(3892),m=a(899),p=a(4449),g=a(7353),b=a(5865),x=a(579);const v=m.Ik().shape({brokerName:m.Yj().required("Broker Name is required"),grossFund:m.ai().typeError("Gross Fund must be a number").required("Gross Fund is required"),arbitrageFund:m.ai().typeError("Arbitrage Fund must be a number").required("Arbitrage Fund is required"),propFund:m.ai().typeError("Prop Fund must be a number").required("Prop Fund is required"),interest:m.ai().typeError("Interest must be a number").required("Interest is required"),sharing:m.ai().typeError("Sharing must be a number").required("Sharing is required"),costPerCr:m.ai().typeError("Cost must be a number").required("Cost is required")}),A=e=>{let{open:r,handleClose:a,onFormSubmit:s,brokerData:n}=e;console.log(n);const l={id:(null===n||void 0===n?void 0:n.id)||null,brokerName:(null===n||void 0===n?void 0:n.brokerName)||"",grossFund:(null===n||void 0===n?void 0:n.grossfund)||null,arbitrageFund:(null===n||void 0===n?void 0:n.arbitragefund)||null,propFund:(null===n||void 0===n?void 0:n.propfund)||null,interest:(null===n||void 0===n?void 0:n.intrest)||null,sharing:(null===n||void 0===n?void 0:n.shares)||null,costPerCr:(null===n||void 0===n?void 0:n.costPerCr)||null};return(0,x.jsx)(p.A,{open:r,onClose:a,children:(0,x.jsxs)(g.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,height:560,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2,overflowY:"scroll"},children:[(0,x.jsx)(b.A,{variant:"h6",sx:{marginBottom:"20px"},children:l.id?"Update Broker":"Add Broker"}),(0,x.jsx)(h.l1,{initialValues:l,validationSchema:v,onSubmit:async(e,r)=>{let{resetForm:n}=r;try{e.id?(await d.A.put("/updateBroker/".concat(e.id),e),u.oR.success("Broker updated successfully.")):(console.log(e),await d.A.post("/createBroker",e),u.oR.success("Broker added successfully.")),s(),n(),a()}catch(i){var o,t,l;console.log(null===i||void 0===i||null===(o=i.response)||void 0===o?void 0:o.data),u.oR.error(null===i||void 0===i||null===(t=i.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.detail)}},enableReinitialize:!0,children:e=>{let{values:r,errors:s,touched:n,handleChange:i,handleBlur:d,setFieldValue:u}=e;return(0,x.jsxs)(h.lV,{children:[(0,x.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,x.jsx)(o.A,{name:"brokerName",label:"Broker Name",value:r.brokerName,onChange:e=>i({target:{name:e.target.name,value:e.target.value.toUpperCase()}}),onBlur:d,error:n.brokerName&&Boolean(s.brokerName),helperText:n.brokerName&&s.brokerName,fullWidth:!0,margin:"normal"}),(0,x.jsx)(o.A,{name:"grossFund",label:"Gross Fund (1Cr)",value:r.grossFund,onChange:i,onBlur:d,error:n.grossFund&&Boolean(s.grossFund),helperText:n.grossFund&&s.grossFund,fullWidth:!0,margin:"normal"}),(0,x.jsx)(o.A,{name:"arbitrageFund",label:"Arbitrage Fund (1Cr)",value:r.arbitrageFund,onChange:i,onBlur:d,error:n.arbitrageFund&&Boolean(s.arbitrageFund),helperText:n.arbitrageFund&&s.arbitrageFund,fullWidth:!0,margin:"normal"}),(0,x.jsx)(o.A,{name:"propFund",label:"Prop Fund (1Cr)",value:r.propFund,onChange:i,onBlur:d,error:n.propFund&&Boolean(s.propFund),helperText:n.propFund&&s.propFund,fullWidth:!0,margin:"normal"}),(0,x.jsxs)("div",{className:"flex gap-2",children:[(0,x.jsx)(o.A,{name:"interest",label:"Interest (PA) %",value:r.interest,onChange:i,onBlur:d,error:n.interest&&Boolean(s.interest),helperText:n.interest&&s.interest,fullWidth:!0,margin:"normal"}),(0,x.jsx)(o.A,{name:"sharing",label:"Sharing (Base) %",value:r.sharing,onChange:i,onBlur:d,error:n.sharing&&Boolean(s.sharing),helperText:n.sharing&&s.sharing,fullWidth:!0,margin:"normal"}),(0,x.jsx)(o.A,{name:"costPerCr",label:"Cost (Per Cr)",value:r.costPerCr,onChange:i,onBlur:d,error:n.costPerCr&&Boolean(s.costPerCr),helperText:n.costPerCr&&s.costPerCr,fullWidth:!0,margin:"normal"})]})]}),(0,x.jsxs)("div",{style:{marginTop:"20px"},children:[(0,x.jsx)(t.A,{variant:"contained",color:"secondary",onClick:a,style:{marginRight:"10px"},children:"Cancel"}),(0,x.jsx)(t.A,{type:"submit",variant:"contained",color:"primary",children:l.id?"Update Broker":"Add Broker"})]})]})}})]})})};var k=a(94),j=a(5394),F=a(5051),C=a(5732),f=a(247),y=a(5218),B=a(4051);const P=["BrokerName","GrossFund","ArbitrageFund","PropFund","Interest","Sharing","CostPerCr","Total Fund","Start Date","Realease Date","Action"],N=()=>{const[e,r]=(0,s.useState)([]),[a,h]=(0,s.useState)(null),[m,p]=(0,s.useState)(!1),[g,b]=(0,s.useState)(null),v=(0,s.useCallback)((async()=>{p(!0);try{const s=await d.A.get("/getAllBroker");if(200===s.status){var e,a;const o=null===(e=s.data)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.map((e=>({"Broker Name":e.brokerName,"Gross Fund":e.grossfund||"-","Arbitrage Fund":e.arbitragefund||"-","Prop Fund":e.propfund||"-",Intrest:e.intrest||"-",shares:e.shares||"-",costPerCr:e.costPerCr||"-","Total Fund":e.grossfund+e.arbitragefund||"-","Start Date":e.startDate||"-","Release Date":e.releaseDate||"-",Action:(0,x.jsxs)(C.A,{children:[(0,x.jsx)(f.b,{children:(0,x.jsx)(n.A,{children:(0,x.jsx)(F.txp,{})})}),(0,x.jsxs)(y.y,{"aria-label":"Action menu",onAction:r=>N(r,e),children:[(0,x.jsx)(B.Y,{isDisabled:3===e.status,children:"Release"},"release"),(0,x.jsx)(B.Y,{isDisabled:3===e.status,children:"Edit"},"edit")]})]})})));r(o)}else u.oR.error("Failed to fetch broker data.")}catch(s){console.error(s),u.oR.error("Error fetching broker data.")}finally{p(!1)}}),[]),N=(e,r)=>{"release"===e?w(r):"edit"===e&&(b(r),h(document.body))},w=async e=>{try{200===(await d.A.put("/releaseBroker/".concat(e.id,"/3"))).status&&(u.oR.success('Broker "'.concat(e.brokerName,'" released successfully.')),v())}catch(r){console.error(r),u.oR.error("Error releasing broker.")}};return(0,s.useEffect)((()=>{v()}),[v]),(0,x.jsx)(i.A,{pageTitle:"Brokers",pageSubtitle:"Add, view, and release brokers",children:(0,x.jsxs)(k.Z,{className:"settings-mainCard",style:{marginTop:"1rem",width:"100%",overflowY:"scroll"},children:[(0,x.jsxs)("div",{className:"flex justify-between p-4 align-middle broker-form",children:[(0,x.jsx)(o.A,{className:"searchUser",placeholder:"Search",InputProps:{startAdornment:(0,x.jsx)(c.A,{position:"start",children:(0,x.jsx)(j.zfp,{})})}}),(0,x.jsx)(t.A,{variant:"contained",color:"primary",onClick:e=>h(e.currentTarget),startIcon:(0,x.jsx)(j.QwN,{}),children:"Add Broker"})]}),(0,x.jsx)(A,{anchorEl:a,open:Boolean(a),handleClose:()=>{h(null),b(null)},onFormSubmit:v,brokerData:g}),(0,x.jsx)("div",{className:"mt-4",children:(0,x.jsx)(l.A,{columnWidths:["10%","10%","10%","10%","15%","10%","10%","10%","40%","15%","10%"],title:P,tableData:e,loading:m})})]})})}},3934:(e,r,a)=>{a.d(r,{A:()=>b});var s=a(5043),n=a(1596),o=a(9650),t=a(1806),l=a(4882),i=a(8076),d=a(39),u=a(8093),c=a(3460),h=a(1637),m=a(1463),p=a(728),g=a(579);const b=e=>{let{title:r=[],columnWidths:a=[],tableData:b=[],renderAction:x,loading:v}=e;const[A,k]=(0,s.useState)(0),[j,F]=(0,s.useState)(5),[C,f]=(0,s.useState)({key:"",direction:"asc"}),y=s.useMemo((()=>C.key?[...b].sort(((e,r)=>e[C.key]<r[C.key]?"asc"===C.direction?-1:1:e[C.key]>r[C.key]?"asc"===C.direction?1:-1:0)):b),[b,C]).slice(A*j,A*j+j);return(0,g.jsxs)(n.A,{className:"custom",children:[(0,g.jsx)(o.A,{children:(0,g.jsxs)(t.A,{className:"tble-custom",children:[(0,g.jsx)(l.A,{children:(0,g.jsx)(i.A,{children:r.map(((e,r)=>(0,g.jsx)(d.A,{align:"center",sx:{fontWeight:"bold",width:a[r]||"auto",minWidth:a[r]||150,maxWidth:a[r]||300},children:(0,g.jsx)(u.A,{active:C.key===e.toLowerCase(),direction:C.key===e.toLowerCase()?C.direction:"asc",onClick:()=>{return r=e.toLowerCase(),void f((e=>{const a=e.key===r&&"asc"===e.direction;return{key:r,direction:a?"desc":"asc"}}));var r},children:e})},r)))})}),(0,g.jsxs)(c.A,{children:[v&&(0,g.jsx)(i.A,{children:(0,g.jsx)(d.A,{colSpan:r.length,className:"middle-noData",children:(0,g.jsx)(h.A,{})})}),y.map(((e,r)=>(0,g.jsx)(i.A,{children:Object.keys(e).map(((s,n)=>["status","id","brokerId","fundAllocated","Record Id"].includes(s)?null:(0,g.jsx)(d.A,{align:"center",sx:{width:a[n]||"auto",minWidth:a[n]||150,maxWidth:a[n]||300,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"action"===s&&x?(0,g.jsx)(p.T,{isDisabled:3===e.status,onPress:()=>{return r=e.status,a=e.id,void(1===r?x(a):x());var r,a},children:1===e.status?"Release":"Released"}):e[s]},"".concat(r,"-").concat(n))))},r))),!v&&y&&0===y.length&&(0,g.jsx)(i.A,{children:(0,g.jsx)(d.A,{colSpan:r.length,className:"middle-noData",align:"center",children:"No data found."})})]})]})}),(0,g.jsx)(m.A,{component:"div",count:b.length,page:A,onPageChange:(e,r)=>{k(r)},rowsPerPage:j,onRowsPerPageChange:e=>{F(parseInt(e.target.value,10)),k(0)},rowsPerPageOptions:[5,10,15]})]})}},4957:(e,r,a)=>{a.d(r,{A:()=>n});const s=a(9722).A.create({baseURL:"http://43.204.150.47:8000",timeout:5e3});s.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e)),(e=>(console.error("Request Interceptor Error:",e),Promise.reject(e)))),s.interceptors.response.use((e=>(console.log("Response Interceptor: Response received"),e)),(e=>(e.response&&401===e.response.status?console.error("Response Interceptor: Unauthorized access - Redirecting to login"):console.error("Response Interceptor Error:",e.message),Promise.reject(e))));const n=s}}]);
//# sourceMappingURL=867.d078884f.chunk.js.map