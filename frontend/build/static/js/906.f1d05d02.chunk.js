"use strict";(self.webpackChunkbcusermanagement=self.webpackChunkbcusermanagement||[]).push([[906],{7131:(e,s,a)=>{a.d(s,{A:()=>n});var r=a(4449),t=(a(5043),a(7353)),l=a(579);const i={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:"1rem"},n=e=>{let{open:s,handleClose:a,children:n}=e;return(0,l.jsx)(r.A,{open:s,onClose:a,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,l.jsx)(t.A,{sx:i,children:n})})}},9525:(e,s,a)=>{a.r(s),a.d(s,{default:()=>L});var r=a(5043),t=a(9014),l=a(1045),i=a(5865),n=a(7392),d=a(9650),o=a(1806),c=a(4882),u=a(8076),m=a(39),h=a(3460),x=a(7784),p=a(3691),j=a(5051),b=a(4670),A=a(5732),v=a(247),N=a(5218),f=a(4051),g=a(579);const y=[{name:"Name",key:"name"},{name:"User ID",key:"id"},{name:"Role",key:"role"},{name:"Status",key:"userStatus"},{name:"Phone Number",key:"phoneNumber"},{name:"Actions",key:"actions"}],w=e=>{let{Userdata:s,onUpdateClick:a,onDeleteClick:t}=e;const[w,U]=(0,r.useState)(1),[k,C]=(0,r.useState)(5),R=(w-1)*k,S=R+k,E=s.slice(R,S),D=(e,s)=>{var r,d;const o=e[s]||"N/A";switch(s){case"id":return(0,g.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.id});case"name":return(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,g.jsx)(l.A,{src:e.avatar,alt:e.firstName,style:{marginRight:"10px"},children:(null===(r=e.firstName)||void 0===r||null===(d=r.charAt(0))||void 0===d?void 0:d.toUpperCase())||""}),(0,g.jsx)("div",{children:(0,g.jsx)(i.A,{variant:"body1",children:e.firstName+" "+e.lastName})})]});case"role":return(0,g.jsx)("div",{children:(0,g.jsx)(i.A,{variant:"body1",children:o})});case"userStatus":return(0,g.jsx)(b.R,{children:o});case"actions":return(0,g.jsx)("div",{style:{display:"flex",gap:"10px"},children:(0,g.jsxs)(A.A,{children:[(0,g.jsx)(v.b,{children:(0,g.jsx)(n.A,{children:(0,g.jsx)(j.txp,{})})}),(0,g.jsxs)(N.y,{"aria-label":"Action menu",onAction:s=>{"update"===s?a(e):"delete"===s&&t(e.id)},children:[console.log("Action menu "+e.userStatus),(0,g.jsx)(f.Y,{isDisabled:"Deactive"===e.userStatus,children:"Update Employee"},"update"),(0,g.jsx)(f.Y,{isDisabled:"Deactive"===e.userStatus,children:"Delete Employee"},"delete")]})]})});default:return o}};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.A,{children:(0,g.jsxs)(o.A,{sx:{minWidth:650},"aria-label":"user table",children:[(0,g.jsx)(c.A,{children:(0,g.jsx)(u.A,{children:y.map((e=>(0,g.jsx)(m.A,{style:{fontWeight:"300",padding:"10px 15px",color:"#A2A1A8"},children:e.name},e.key)))})}),(0,g.jsx)(h.A,{children:E.length>0?E.map((e=>(0,g.jsx)(u.A,{hover:!0,children:y.map((s=>(0,g.jsx)(m.A,{sx:{padding:"10px 15px",height:"44px",fontSize:"16px",fontWeight:300},children:D(e,s.key)},s.key)))},e.id))):(0,g.jsx)(u.A,{children:(0,g.jsx)(m.A,{colSpan:y.length,align:"center",style:{height:"200px"},children:(0,g.jsx)(i.A,{variant:"h6",children:"No data available"})})})})]})}),(0,g.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"16px"},children:[(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,g.jsx)(i.A,{variant:"body2",children:"Rows per page:"}),(0,g.jsx)(x.A,{type:"number",value:k,onChange:e=>C(parseInt(e.target.value,10)||5),style:{width:"60px"},size:"small"})]}),(0,g.jsx)(p.A,{count:Math.ceil(s.length/k),page:w,onChange:(e,s)=>{U(s)},color:"primary"})]})]})};var U=a(7561),k=a(9190),C=a(2268),R=a(8988),S=a(1906),E=a(2110),D=a(1787),I=a(7131),q=a(3892),z=a(899),W=a(7488),P=a(4957),Y=a(5394);const L=()=>{const e=localStorage.getItem("token"),[s,a]=(0,r.useState)([]),[l,d]=(0,r.useState)(""),[o,c]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)({firstName:"",lastName:"",email:"",role:"",password:"",phonenumber:""}),j=async()=>{try{const s=await P.A.get("/users",{headers:{Authorization:"bearer ".concat(e)}});200===s.status&&a(s.data)}catch(s){console.error("Error fetching users:",s)}};(0,r.useEffect)((()=>{j()}),[]);const b=s.filter((e=>{const s=l.toLowerCase();return e.firstName.toLowerCase().includes(s)||e.lastName.toLowerCase().includes(s)})),A=z.Ik({firstName:z.Yj().required("First Name is required"),lastName:z.Yj().required("Last Name is required"),email:z.Yj().email("Invalid email format").required("Email is required"),role:z.ai().required("Role is required"),phonenumber:z.Yj().required("Mobile number is required"),password:u?z.Yj().notRequired():z.Yj().required("Password is required")}),v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(p({id:e.id,firstName:e.firstName,lastName:e.lastName,email:e.email,phonenumber:e.phoneNumber,role:"Dealer"===e.role?2:3,password:""}),m(!0)):(p({firstName:"",lastName:"",email:"",role:"",password:"",phonenumber:""}),m(!1)),c(!0)};return(0,g.jsxs)(t.A,{pageTitle:"All users",pageSubtitle:"Manage user details",children:[(0,g.jsxs)(I.A,{open:o,handleClose:()=>c(!1),children:[(0,g.jsx)(i.A,{variant:"h6",className:"mb-2",children:u?"Update User":"Add User"}),(0,g.jsx)(q.l1,{initialValues:h,validationSchema:A,onSubmit:async s=>{try{if(console.log("/updateUser/".concat(s.id),"======"),u){200===(await P.A.put("/updateUser/".concat(s.id),s,{headers:{Authorization:"bearer ".concat(e)}})).status&&(W.oR.success("User updated successfully"),j(),c(!1))}else{200===(await P.A.post("/register",s,{headers:{Authorization:"bearer ".concat(e)}})).status&&(W.oR.success("User added successfully"),j(),c(!1))}}catch(i){var a,r,t,l;console.error("Error submitting user:",null===i||void 0===i||null===(a=i.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.detail),W.oR.error(null===i||void 0===i||null===(t=i.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.detail)}},enableReinitialize:!0,children:e=>{let{errors:s,touched:a,setFieldValue:r}=e;return(0,g.jsxs)(q.lV,{children:[(0,g.jsxs)("div",{className:"flex gap-4 mb-3",children:[(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)(q.D0,{name:"firstName",as:x.A,label:"First Name",placeholder:"Enter First Name",fullWidth:!0}),a.firstName&&s.firstName&&(0,g.jsx)("div",{className:"text-red-500 text-sm",children:s.firstName})]}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)(q.D0,{name:"lastName",as:x.A,label:"Last Name",placeholder:"Enter Last Name",fullWidth:!0}),a.lastName&&s.lastName&&(0,g.jsx)("div",{className:"text-red-500 text-sm",children:s.lastName})]})]}),(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)(q.D0,{name:"email",type:"email",as:x.A,label:"Email",placeholder:"Enter Your Email",fullWidth:!0,disabled:u}),a.email&&s.email&&(0,g.jsx)("div",{className:"text-red-500 text-sm",children:s.email})]}),(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)(q.D0,{name:"phonenumber",as:x.A,label:"Phone Number",placeholder:"Enter Phone Number",fullWidth:!0}),a.phonenumber&&s.phonenumber&&(0,g.jsx)("div",{className:"text-red-500 text-sm",children:s.phonenumber})]}),(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsxs)(U.A,{fullWidth:!0,children:[(0,g.jsx)(k.A,{children:"Role"}),(0,g.jsxs)(q.D0,{name:"role",as:C.A,label:"Role",onChange:e=>r("role",e.target.value),children:[(0,g.jsx)(R.A,{value:"2",children:"Dealer"}),(0,g.jsx)(R.A,{value:"3",children:"Trader"})]})]}),a.role&&s.role&&(0,g.jsx)("div",{className:"text-red-500 text-sm",children:s.role})]}),!u&&(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)(q.D0,{name:"password",type:"password",as:x.A,label:"Password",placeholder:"Enter Password",fullWidth:!0}),a.password&&s.password&&(0,g.jsx)("div",{className:"text-red-500 text-sm",children:s.password})]}),(0,g.jsxs)("div",{className:"mt-4 flex gap-4",children:[(0,g.jsx)(S.A,{type:"submit",className:"mr-3 submit-btn",variant:"contained",children:u?"Update User":"Add User"}),(0,g.jsx)(S.A,{variant:"outlined",onClick:()=>c(!1),children:"Cancel"})]})]})}})]}),(0,g.jsx)(E.A,{className:"p-3 mt-4 userMainCard",children:(0,g.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)(x.A,{className:"searchUser",placeholder:"Search",value:l,onChange:e=>d(e.target.value),InputProps:{startAdornment:(0,g.jsx)(D.A,{position:"start",children:(0,g.jsx)(n.A,{children:(0,g.jsx)(Y.zfp,{})})})},fullWidth:!0}),(0,g.jsx)(S.A,{className:"h-5 mb-4 addUserButton",onClick:()=>v(),variant:"outlined",startIcon:(0,g.jsx)(Y.QwN,{}),children:"Add New Users"})]}),(0,g.jsx)(w,{Userdata:b,onUpdateClick:e=>v(e),onDeleteClick:s=>(async s=>{try{200===(await P.A.delete("/deleteUser/".concat(s),{headers:{Authorization:"bearer ".concat(e)}})).status&&(W.oR.success("User deleted successfully"),j())}catch(a){console.error("Error deleting user:",a),W.oR.error("Error deleting user.")}})(s)})]})})]})}},4957:(e,s,a)=>{a.d(s,{A:()=>t});const r=a(9722).A.create({baseURL:"http://43.204.150.47:8000",timeout:5e3});r.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e)),(e=>(console.error("Request Interceptor Error:",e),Promise.reject(e)))),r.interceptors.response.use((e=>(console.log("Response Interceptor: Response received"),e)),(e=>(e.response&&401===e.response.status?console.error("Response Interceptor: Unauthorized access - Redirecting to login"):console.error("Response Interceptor Error:",e.message),Promise.reject(e))));const t=r}}]);
//# sourceMappingURL=906.f1d05d02.chunk.js.map