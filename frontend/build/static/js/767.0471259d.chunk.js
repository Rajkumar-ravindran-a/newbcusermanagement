"use strict";(self.webpackChunkbcusermanagement=self.webpackChunkbcusermanagement||[]).push([[767],{2767:(e,r,n)=>{n.r(r),n.d(r,{default:()=>L});var s=n(5043),t=n(7392),a=n(7784),o=n(1906),i=(n(3934),n(8330)),d=n(4957),l=n(7488),u=n(1787),c=n(3892),h=n(899),g=n(4449),p=n(7353),x=n(5865),F=n(579);const m=h.Ik().shape({brokerName:h.Yj().required("Broker Name is required"),grossFund:h.ai().typeError("Gross Fund must be a number").min(0,"Gross Fund must be greater than or equal to 0").required("Gross Fund is required"),grossFundInterest:h.ai().typeError("Gross Fund Interest must be a number").min(0,"Interest must be at least 0%").max(100,"Interest cannot exceed 100%").required("Gross Fund Interest is required"),grossFundSharing:h.ai().typeError("Gross Fund Sharing must be a number").min(0,"Sharing must be at least 0%").max(100,"Sharing cannot exceed 100%").required("Gross Fund Sharing is required"),arbitrageFund:h.ai().typeError("Arbitrage Fund must be a number").min(0,"Arbitrage Fund must be greater than or equal to 0").required("Arbitrage Fund is required"),arbitrageFundInterest:h.ai().typeError("Arbitrage Fund Interest must be a number").min(0,"Interest must be at least 0%").max(100,"Interest cannot exceed 100%").required("Arbitrage Fund Interest is required"),arbitrageFundSharing:h.ai().typeError("Arbitrage Fund Sharing must be a number").min(0,"Sharing must be at least 0%").max(100,"Sharing cannot exceed 100%").required("Arbitrage Fund Sharing is required"),propFund:h.ai().typeError("Prop Fund must be a number").min(0,"Prop Fund must be greater than or equal to 0").required("Prop Fund is required"),propFundInterest:h.ai().typeError("Prop Fund Interest must be a number").min(0,"Interest must be at least 0%").max(100,"Interest cannot exceed 100%").required("Prop Fund Interest is required"),propFundSharing:h.ai().typeError("Prop Fund Sharing must be a number").min(0,"Sharing must be at least 0%").max(100,"Sharing cannot exceed 100%").required("Prop Fund Sharing is required"),costPerCr:h.ai().typeError("Cost must be a number").min(0,"Cost must be greater than or equal to 0").required("Cost is required")}),A=e=>{let{open:r,handleClose:n,onFormSubmit:s,brokerData:t}=e;const i={id:(null===t||void 0===t?void 0:t.id)||null,brokerName:(null===t||void 0===t?void 0:t.brokerName)||"",grossFund:(null===t||void 0===t?void 0:t.grossFund)||0,grossFundInterest:(null===t||void 0===t?void 0:t.grossFundInterest)||0,grossFundSharing:(null===t||void 0===t?void 0:t.grossFundSharing)||0,arbitrageFund:(null===t||void 0===t?void 0:t.arbitrageFund)||0,arbitrageFundInterest:(null===t||void 0===t?void 0:t.arbitrageFundInterest)||0,arbitrageFundSharing:(null===t||void 0===t?void 0:t.arbitrageFundSharing)||0,propFund:(null===t||void 0===t?void 0:t.propFund)||0,propFundInterest:(null===t||void 0===t?void 0:t.propFundInterest)||0,propFundSharing:(null===t||void 0===t?void 0:t.propFundSharing)||0,costPerCr:(null===t||void 0===t?void 0:t.costPerCr)||0};return(0,F.jsx)(g.A,{open:r,onClose:n,children:(0,F.jsxs)(p.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2,overflowY:"auto"},children:[(0,F.jsx)(x.A,{variant:"h6",sx:{marginBottom:"20px"},children:i.id?"Update Broker":"Add Broker"}),(0,F.jsx)(c.l1,{initialValues:i,validationSchema:m,onSubmit:async(e,r)=>{let{resetForm:t}=r;try{e.id?(await d.A.put("/updateBroker/".concat(e.id),e),l.oR.success("Broker updated successfully.")):(await d.A.post("/createBroker",e),l.oR.success("Broker added successfully.")),s(),t(),n()}catch(u){var a,o,i;console.error(null===u||void 0===u||null===(a=u.response)||void 0===a?void 0:a.data),l.oR.error((null===u||void 0===u||null===(o=u.response)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.detail)||"An error occurred.")}},enableReinitialize:!0,children:e=>{let{values:r,errors:s,touched:t,handleChange:d,handleBlur:l,setFieldValue:u}=e;return(0,F.jsx)(c.lV,{children:(0,F.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,F.jsx)(a.A,{name:"brokerName",label:"Broker Name",value:r.brokerName,onChange:e=>{const r=e.target.value.toUpperCase();u("brokerName",r)},onBlur:l,error:t.brokerName&&Boolean(s.brokerName),helperText:t.brokerName&&s.brokerName,fullWidth:!0,inputProps:{style:{textTransform:"uppercase"}}}),(0,F.jsxs)("div",{className:"flex gap-4",children:[(0,F.jsx)(a.A,{name:"grossFund",label:"Gross Fund (1Cr)",value:r.grossFund,onChange:d,onBlur:l,error:t.grossFund&&Boolean(s.grossFund),helperText:t.grossFund&&s.grossFund,fullWidth:!0}),(0,F.jsx)(a.A,{name:"grossFundInterest",label:"Interest (%)",value:r.grossFundInterest,onChange:d,onBlur:l,error:t.grossFundInterest&&Boolean(s.grossFundInterest),helperText:t.grossFundInterest&&s.grossFundInterest,fullWidth:!0}),(0,F.jsx)(a.A,{name:"grossFundSharing",label:"Sharing (%)",value:r.grossFundSharing,onChange:d,onBlur:l,error:t.grossFundSharing&&Boolean(s.grossFundSharing),helperText:t.grossFundSharing&&s.grossFundSharing,fullWidth:!0})]}),(0,F.jsxs)("div",{className:"flex gap-4",children:[(0,F.jsx)(a.A,{name:"arbitrageFund",label:"Arbitrage Fund (1Cr)",value:r.arbitrageFund,onChange:d,onBlur:l,error:t.arbitrageFund&&Boolean(s.arbitrageFund),helperText:t.arbitrageFund&&s.arbitrageFund,fullWidth:!0}),(0,F.jsx)(a.A,{name:"arbitrageFundInterest",label:"Interest (%)",value:r.arbitrageFundInterest,onChange:d,onBlur:l,error:t.arbitrageFundInterest&&Boolean(s.arbitrageFundInterest),helperText:t.arbitrageFundInterest&&s.arbitrageFundInterest,fullWidth:!0}),(0,F.jsx)(a.A,{name:"arbitrageFundSharing",label:"Sharing (%)",value:r.arbitrageFundSharing,onChange:d,onBlur:l,error:t.arbitrageFundSharing&&Boolean(s.arbitrageFundSharing),helperText:t.arbitrageFundSharing&&s.arbitrageFundSharing,fullWidth:!0})]}),(0,F.jsxs)("div",{className:"flex gap-4",children:[(0,F.jsx)(a.A,{name:"propFund",label:"Prop Fund (1Cr)",value:r.propFund,onChange:d,onBlur:l,error:t.propFund&&Boolean(s.propFund),helperText:t.propFund&&s.propFund,fullWidth:!0}),(0,F.jsx)(a.A,{name:"propFundInterest",label:"Interest (%)",value:r.propFundInterest,onChange:d,onBlur:l,error:t.propFundInterest&&Boolean(s.propFundInterest),helperText:t.propFundInterest&&s.propFundInterest,fullWidth:!0}),(0,F.jsx)(a.A,{name:"propFundSharing",label:"Sharing (%)",value:r.propFundSharing,onChange:d,onBlur:l,error:t.propFundSharing&&Boolean(s.propFundSharing),helperText:t.propFundSharing&&s.propFundSharing,fullWidth:!0})]}),(0,F.jsx)(a.A,{name:"costPerCr",label:"Cost Per Cr",value:r.costPerCr,onChange:d,onBlur:l,error:t.costPerCr&&Boolean(s.costPerCr),helperText:t.costPerCr&&s.costPerCr,fullWidth:!0,margin:"normal"}),(0,F.jsxs)("div",{className:"flex justify-end gap-4 mt-4",children:[(0,F.jsx)(o.A,{variant:"contained",color:"secondary",onClick:n,children:"Cancel"}),(0,F.jsx)(o.A,{type:"submit",variant:"contained",color:"primary",children:i.id?"Update Broker":"Add Broker"})]})]})})}})]})})};var b=n(94),j=n(5394),k=n(5051),v=n(5732),S=n(247),I=n(5218),C=n(4051),y=n(1596),f=n(9650),N=n(1806),B=n(4882),w=n(8076),P=n(39),q=n(8093),R=n(3460),W=n(1637),T=n(279),G=n(728),E=n(8737),D=n(692);const U=e=>{let{title:r=[],columnWidths:n=[],tableData:a=[],renderAction:o,loading:i}=e;const[d,l]=(0,s.useState)({key:"",direction:"asc"}),[u,c]=(0,s.useState)(null),h=["status","id","brokerId","fundAllocated","Record Id","Gross Fund Interest","Gross Fund Sharing","Arbitrage Fund Interest","Arbitrage Fund Sharing","Prop Fund Interest","Prop Fund Sharing","Cost Per Cr"],g=s.useMemo((()=>d.key?[...a].sort(((e,r)=>e[d.key]<r[d.key]?"asc"===d.direction?-1:1:e[d.key]>r[d.key]?"asc"===d.direction?1:-1:0)):a),[a,d]);return(0,F.jsx)(y.A,{className:"custom",children:(0,F.jsx)(f.A,{className:"tble-container",children:(0,F.jsxs)(N.A,{className:"tble-custom",stickyHeader:!0,children:[(0,F.jsx)(B.A,{children:(0,F.jsxs)(w.A,{className:"tble-head",children:[(0,F.jsx)(P.A,{})," ",r.map(((e,r)=>(0,F.jsx)(P.A,{align:"center",sx:{width:n[r]||"auto",minWidth:n[r]||150,maxWidth:n[r]||300,position:"sticky",top:0,backgroundColor:"white",zIndex:2,padding:"10px 15px",height:"44px",fontSize:"16px",fontWeight:300},children:(0,F.jsx)(q.A,{active:d.key===e.toLowerCase(),direction:d.key===e.toLowerCase()?d.direction:"asc",onClick:()=>{return r=e.toLowerCase(),void l((e=>{const n=e.key===r&&"asc"===e.direction;return{key:r,direction:n?"desc":"asc"}}));var r},children:null===e||void 0===e?void 0:e.toUpperCase()})},r)))]})}),(0,F.jsxs)(R.A,{className:"tble-body",children:[i&&(0,F.jsx)(w.A,{children:(0,F.jsx)(P.A,{colSpan:r.length+1,align:"center",children:(0,F.jsx)(W.A,{})})}),g.map(((e,a)=>(0,F.jsxs)(s.Fragment,{children:[(0,F.jsxs)(w.A,{children:[(0,F.jsx)(P.A,{children:(0,F.jsx)(t.A,{size:"small",onClick:()=>(e=>{c((r=>r===e?null:e))})(a),children:u===a?(0,F.jsx)(E.A,{}):(0,F.jsx)(D.A,{})})}),Object.keys(e).filter((e=>!h.includes(e))).map(((r,s)=>"action"===r&&o?(0,F.jsx)(P.A,{align:"center",children:(0,F.jsx)(G.T,{isDisabled:3===e.status,onPress:()=>o(e.id),children:1===e.status?"Release":"Released"})},s):(0,F.jsx)(P.A,{align:"center",sx:{minWidth:n[s]||150,maxWidth:n[s]||300,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e[r]},s)))]}),(0,F.jsx)(w.A,{children:(0,F.jsx)(P.A,{colSpan:r.length+1,sx:{p:0},children:(0,F.jsxs)(T.A,{in:u===a,timeout:"auto",unmountOnExit:!0,children:[(0,F.jsxs)("div",{style:{padding:16,backgroundColor:"#f9f9f9",display:"flex",gap:4},children:[(0,F.jsx)(y.A,{className:"flex-1",children:(0,F.jsx)(f.A,{children:(0,F.jsxs)(N.A,{children:[(0,F.jsx)(B.A,{children:(0,F.jsx)(w.A,{children:(0,F.jsx)(P.A,{colSpan:3,sx:{textAlign:"center"},children:"Gross Fund"})})}),(0,F.jsxs)(R.A,{children:[(0,F.jsxs)(w.A,{children:[(0,F.jsx)(P.A,{children:"Fund"}),(0,F.jsx)(P.A,{children:"Intrest %"}),(0,F.jsx)(P.A,{children:"Sharing %"})]}),(0,F.jsxs)(w.A,{children:[(0,F.jsx)(P.A,{children:e["Gross Fund"]}),(0,F.jsxs)(P.A,{children:[e["Gross Fund Interest"],"%"]}),(0,F.jsxs)(P.A,{children:[e["Gross Fund Sharing"],"%"]})]})]})]})})}),(0,F.jsx)(y.A,{className:"flex-1",children:(0,F.jsx)(f.A,{children:(0,F.jsxs)(N.A,{children:[(0,F.jsx)(B.A,{children:(0,F.jsx)(w.A,{children:(0,F.jsx)(P.A,{colSpan:3,sx:{textAlign:"center"},children:"Arbitrage Fund"})})}),(0,F.jsxs)(R.A,{children:[(0,F.jsxs)(w.A,{children:[(0,F.jsx)(P.A,{children:"Fund"}),(0,F.jsx)(P.A,{children:"Intrest %"}),(0,F.jsx)(P.A,{children:"Sharing %"})]}),(0,F.jsxs)(w.A,{children:[(0,F.jsx)(P.A,{children:e["Arbitrage Fund"]}),(0,F.jsxs)(P.A,{children:[e["Arbitrage Fund Interest"],"%"]}),(0,F.jsxs)(P.A,{children:[e["Arbitrage Fund Sharing"],"%"]})]})]})]})})}),(0,F.jsx)(y.A,{className:"flex-1",children:(0,F.jsx)(f.A,{children:(0,F.jsxs)(N.A,{children:[(0,F.jsx)(B.A,{children:(0,F.jsx)(w.A,{children:(0,F.jsx)(P.A,{colSpan:3,sx:{textAlign:"center"},children:"Prop Fund"})})}),(0,F.jsxs)(R.A,{children:[(0,F.jsxs)(w.A,{children:[(0,F.jsx)(P.A,{children:"Fund"}),(0,F.jsx)(P.A,{children:"Intrest %"}),(0,F.jsx)(P.A,{children:"Sharing %"})]}),(0,F.jsxs)(w.A,{children:[(0,F.jsx)(P.A,{children:e["Prop Fund"]}),(0,F.jsxs)(P.A,{children:[e["Prop Fund Interest"],"%"]}),(0,F.jsxs)(P.A,{children:[e["Prop Fund Sharing"],"%"]})]})]})]})})})]}),(0,F.jsx)(y.A,{sx:{margin:"1rem"},children:(0,F.jsx)(f.A,{children:(0,F.jsxs)(N.A,{children:[(0,F.jsx)(B.A,{children:(0,F.jsxs)(w.A,{children:[(0,F.jsx)(P.A,{children:"Cost per CR"}),(0,F.jsx)(P.A,{children:"Total Fund"})]})}),(0,F.jsx)(R.A,{children:(0,F.jsxs)(w.A,{children:[(0,F.jsx)(P.A,{children:e["Cost Per Cr"]}),(0,F.jsx)(P.A,{children:e["Total Fund"]})]})})]})})})]})})})]},a))),!i&&0===g.length&&(0,F.jsx)(w.A,{children:(0,F.jsx)(P.A,{colSpan:r.length+1,align:"center",className:"middle-noData",children:"No data found."})})]})]})})})},z=["Broker Name","Gross","Arbitrage","Prop","Total ","Action"],L=()=>{const[e,r]=(0,s.useState)([]),[n,c]=(0,s.useState)(null),[h,g]=(0,s.useState)(!1),[p,x]=(0,s.useState)(null),m=(0,s.useCallback)((async()=>{g(!0);try{const s=await d.A.get("/getAllBroker/1");if(200===s.status){var e,n;const a=null===(e=s.data)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.map((e=>({"Broker Name":e.brokerName,"Gross Fund Interest":e.grossFundInterest||0,"Gross Fund":e.grossFund||0,"Gross Fund Sharing":e.grossFundSharing||0,"Arbitrage Fund Interest":e.arbitrageFundInterest||0,"Arbitrage Fund":e.arbitrageFund||0,"Arbitrage Fund Sharing":e.arbitrageFundSharing||0,"Prop Fund Interest":e.propFundInterest||0,"Prop Fund":e.propFund||0,"Prop Fund Sharing":e.propFundSharing||0,"Cost Per Cr":e.costPerCr||0,"Total Fund":void 0!==e.grossFund&&void 0!==e.arbitrageFund&&void 0!==e.propFund?e.grossFund+e.arbitrageFund+e.propFund:0,Action:(0,F.jsxs)(v.A,{children:[(0,F.jsx)(S.b,{children:(0,F.jsx)(t.A,{children:(0,F.jsx)(k.txp,{})})}),(0,F.jsxs)(I.y,{"aria-label":"Action menu",onAction:r=>y(r,e),children:[(0,F.jsx)(C.Y,{isDisabled:3===e.status,children:"Release"},"release"),(0,F.jsx)(C.Y,{isDisabled:3===e.status,children:"Edit"},"edit"),(0,F.jsx)(C.Y,{children:"Delete"},"delete")]})]})})));r(a)}else l.oR.error("Failed to fetch broker data.")}catch(s){console.error(s),l.oR.error("Error fetching broker data.")}finally{g(!1)}}),[]),y=(e,r)=>{"release"===e?f(r):"edit"===e?(x(r),c(document.body)):"delete"===e&&(async e=>{try{console.warn(e),200===(await d.A.put("/softDeleteBroker/".concat(e.id))).status?(l.oR.success('Broker "'.concat(e.brokerName,'" deleted successfully.')),m()):l.oR.error('Failed to delete broker "'.concat(e.brokerName,'".'))}catch(r){console.error(r),l.oR.error("Error deleting broker.")}})(r)},f=async e=>{try{200===(await d.A.put("/releaseBroker/".concat(e.id,"/3"))).status&&(l.oR.success('Broker "'.concat(e.brokerName,'" released successfully.')),m())}catch(r){console.error(r),l.oR.error("Error releasing broker.")}};return(0,s.useEffect)((()=>{m()}),[m]),(0,F.jsx)(i.A,{pageTitle:"Brokers",pageSubtitle:"Add, view, and release brokers",children:(0,F.jsxs)(b.Z,{className:"settings-mainCard",style:{marginTop:"1rem",width:"100%",overflowY:"scroll"},children:[(0,F.jsxs)("div",{className:"flex justify-between p-2 align-middle broker-form",children:[(0,F.jsx)(a.A,{className:"searchUser",placeholder:"Search",InputProps:{startAdornment:(0,F.jsx)(u.A,{position:"start",children:(0,F.jsx)(j.zfp,{})})}}),(0,F.jsx)(o.A,{variant:"contained",color:"primary",onClick:e=>c(e.currentTarget),startIcon:(0,F.jsx)(j.QwN,{}),children:"Add Broker"})]}),(0,F.jsx)(A,{anchorEl:n,open:Boolean(n),handleClose:()=>{c(null),x(null)},onFormSubmit:m,brokerData:p}),(0,F.jsx)("div",{className:"mt-4",children:(0,F.jsx)(U,{title:z,tableData:e,loading:h})})]})})}},3934:(e,r,n)=>{n.d(r,{A:()=>x});var s=n(5043),t=n(1596),a=n(9650),o=n(1806),i=n(4882),d=n(8076),l=n(39),u=n(8093),c=n(3460),h=n(1637),g=n(728),p=n(579);const x=e=>{let{title:r=[],columnWidths:n=[],tableData:x=[],renderAction:F,loading:m}=e;const[A,b]=(0,s.useState)(0),[j,k]=(0,s.useState)(5),[v,S]=(0,s.useState)({key:"",direction:"asc"}),I=e=>{S((r=>{const n=r.key===e&&"asc"===r.direction;return{key:e,direction:n?"desc":"asc"}}))},C=s.useMemo((()=>v.key?[...x].sort(((e,r)=>e[v.key]<r[v.key]?"asc"===v.direction?-1:1:e[v.key]>r[v.key]?"asc"===v.direction?1:-1:0)):x),[x,v]);return(0,p.jsx)(t.A,{className:"custom",children:(0,p.jsx)(a.A,{className:"tble-container",children:(0,p.jsxs)(o.A,{className:"tble-custom",stickyHeader:!0,children:[(0,p.jsx)(i.A,{children:(0,p.jsx)(d.A,{className:"tble-head",children:r.map(((e,r)=>"Gross Fund"===e?(0,p.jsx)(l.A,{align:"center",sx:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:(0,p.jsx)(u.A,{active:"grossFund"===v.key,direction:"grossFund"===v.key?v.direction:"asc",onClick:()=>I("grossFund"),children:"Gross Fund (Fund | Interest | Sharing)"})},"grossFund"):(0,p.jsx)(l.A,{align:"center",sx:{width:n[r]||"auto",minWidth:n[r]||150,maxWidth:n[r]||300,position:"sticky",top:0,backgroundColor:"white",zIndex:2},children:(0,p.jsx)(u.A,{active:v.key===e.toLowerCase(),direction:v.key===e.toLowerCase()?v.direction:"asc",onClick:()=>I(e.toLowerCase()),children:null===e||void 0===e?void 0:e.toUpperCase()})},r)))})}),(0,p.jsxs)(c.A,{className:"tble-body",children:[m&&(0,p.jsx)(d.A,{children:(0,p.jsx)(l.A,{colSpan:r.length,className:"middle-noData",children:(0,p.jsx)(h.A,{})})}),C.map(((e,r)=>(0,p.jsx)(d.A,{children:Object.keys(e).map(((s,t)=>["status","id","brokerId","fundAllocated","Record Id"].includes(s)?null:"grossFund"===s?(0,p.jsx)(l.A,{align:"center",sx:{minWidth:200,maxWidth:300,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"".concat(e.grossFund.toUpperCase()," | ").concat(e.grossFundInterest.toUpperCase()," | ").concat(e.grossFundSharing.toUpperCase())},"".concat(r,"-grossFund")):(0,p.jsx)(l.A,{align:"center",sx:{width:n[t]||"auto",minWidth:n[t]||150,maxWidth:n[t]||300,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"action"===s&&F?(0,p.jsx)(g.T,{isDisabled:3===e.status,onPress:()=>{return r=e.status,n=e.id,void(1===r?F(n):F());var r,n},children:1===e.status?"Release":"Released"}):e[s]},"".concat(r,"-").concat(t))))},r))),!m&&0===C.length&&(0,p.jsx)(d.A,{children:(0,p.jsx)(l.A,{colSpan:r.length,className:"middle-noData",align:"center",children:"No data found."})})]})]})})})}},4957:(e,r,n)=>{n.d(r,{A:()=>t});const s=n(9722).A.create({baseURL:"http://localhost:8000",timeout:5e3});s.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e)),(e=>(console.error("Request Interceptor Error:",e),Promise.reject(e)))),s.interceptors.response.use((e=>(console.log("Response Interceptor: Response received"),e)),(e=>(e.response&&401===e.response.status?(window.location.href="/",console.error("Response Interceptor: Unauthorized access - Redirecting to login")):console.error("Response Interceptor Error:",e.message),Promise.reject(e))));const t=s}}]);
//# sourceMappingURL=767.0471259d.chunk.js.map