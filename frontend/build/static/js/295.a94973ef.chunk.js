"use strict";(self.webpackChunkbcusermanagement=self.webpackChunkbcusermanagement||[]).push([[295],{9295:(e,r,a)=>{a.r(r),a.d(r,{default:()=>D});var s=a(5043),t=a(3892),o=a(899),n=a(7784),l=a(4449),i=a(7353),d=a(5865),c=a(3934),m=a(5293),u=a(4957),p=a(7488),h=a(94),g=a(728),x=a(5394),y=a(1787),j=a(2268),b=a(8988),A=a(7561),k=a(9190),N=a(4054),f=a(579);const v=o.Ik().shape({brokerName:o.Yj().required("Broker Name is required"),id:o.Yj().required("ID is required"),startDate:o.p6().required("Start Date is required"),employee:o.Yj().required("employee is required"),nism:o.Yj().required("nism is required"),idType:o.Yj().required("idType is required")}),I=["Id","Broker Name","Start Date","Releases Date","Employee","Nism","IdType","Action"],D=()=>{const[e,r]=(0,s.useState)([]),[a,o]=(0,s.useState)(!1),[D,T]=(0,s.useState)([]),[B,C]=(0,s.useState)([]),R=()=>o(!1),S=async()=>{try{const a=await u.A.get("/getAllBroker");var e;if(200===a.status)r(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data.filter((e=>1===e.status)))}catch(a){console.error(a),p.oR.error("Error fetching broker data.")}};(0,s.useEffect)((()=>{S(),(async()=>{try{const e=await u.A.get("/users");200===e.status?T(e.data):(console.log("error in getUserData"),T([]))}catch(e){console.error(e),p.oR.error("Error fetching user data.")}})(),(async()=>{try{const e=await u.A.get("/getIds");if(200===e.status){console.log(e.data);const r=e.data.data.map((e=>({Id:e.idNumber,"Broker Name":e.brokerName,"Start Date":e.startDate,"Releases Date":e.releasesDate?e.releasesDate:"-",Employee:null!==e&&void 0!==e&&e.employee?e.employee:"-",Nism:e.nism,IdType:e.idType,Action:(0,f.jsx)("div",{className:"action-buttons",children:(0,f.jsx)(g.T,{size:"small",className:"submit-btn",children:"Release"})})})));C(r)}else console.log("error in getIdData"),C([])}catch(e){console.error(e),p.oR.error("Error fetching id data.")}})()}),[]);return(0,f.jsx)(m.A,{pageTitle:"Id Management",pageSubtitle:"Manage Id details, map brokers",children:(0,f.jsxs)(h.Z,{classNames:"settings-mainCard",style:{marginTop:"1rem"},children:[(0,f.jsxs)("div",{className:"flex justify-between p-4 align-middle broker-form",children:[(0,f.jsx)(n.A,{className:"searchUser",placeholder:"Search",InputProps:{startAdornment:(0,f.jsx)(y.A,{position:"start",children:(0,f.jsx)(x.zfp,{})})}}),(0,f.jsx)(g.T,{onPress:()=>o(!0),className:"submit-btn p-4",children:"Add Id"})]}),(0,f.jsx)(l.A,{open:a,onClose:R,children:(0,f.jsxs)(i.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2},children:[(0,f.jsx)(d.A,{variant:"h6",component:"h2",gutterBottom:!0,children:"Add Id"}),(0,f.jsx)(t.l1,{initialValues:{brokerName:"",id:"",startDate:"",employee:"",nism:"",idType:""},validationSchema:v,onSubmit:async(e,r)=>{let{resetForm:a}=r;try{200===(await u.A.post("/createId",e)).status&&(p.oR.success("Id added successfully."),S(),a(),R())}catch(s){console.error(s),p.oR.error("Error adding broker.")}},children:r=>{let{values:a,errors:s,touched:o,handleChange:l,handleBlur:d}=r;return(0,f.jsxs)(t.lV,{children:[(0,f.jsxs)("div",{className:"flex gap-2",children:[(0,f.jsx)(n.A,{fullWidth:!0,margin:"normal",name:"id",label:"ID",value:a.id||"",onChange:l,onBlur:d,error:o.id&&Boolean(s.id),helperText:o.id&&s.id}),(0,f.jsxs)(A.A,{fullWidth:!0,margin:"normal",error:o.brokerName&&Boolean(s.brokerName),children:[(0,f.jsx)(k.A,{id:"brokerName-label",children:"Broker Name"}),(0,f.jsx)(j.A,{labelId:"brokerName-label",id:"brokerName",name:"brokerName",label:"Broker Name",value:a.brokerName||"",onChange:l,onBlur:d,children:e&&e.map(((e,r)=>(0,f.jsx)(b.A,{value:e.id,children:e.brokerName},r)))}),o.brokerName&&Boolean(s.brokerName)&&(0,f.jsx)(N.A,{children:s.brokerName})]})]}),(0,f.jsxs)("div",{className:"flex gap-2",children:[(0,f.jsx)(n.A,{fullWidth:!0,margin:"normal",name:"startDate",label:"Start Date",type:"date",InputLabelProps:{shrink:!0},value:a.startDate||"",onChange:l,onBlur:d,error:o.startDate&&Boolean(s.startDate),helperText:o.startDate&&s.startDate}),(0,f.jsxs)(A.A,{fullWidth:!0,margin:"normal",error:o.employee&&Boolean(s.employee),children:[(0,f.jsx)(k.A,{id:"employee-label",children:"Employee"}),(0,f.jsxs)(j.A,{labelId:"employee-label",id:"employee",name:"employee",label:"Employee",value:a.employee||"",onChange:l,onBlur:d,children:[console.log(D),D&&D.map(((e,r)=>(0,f.jsx)(b.A,{value:e.id,children:e.firstName+" "+e.lastName},r)))]}),o.employee&&s.employee&&(0,f.jsx)(N.A,{children:s.employee})]})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)(n.A,{fullWidth:!0,margin:"normal",name:"nism",label:"NISM",value:a.nism||"",onChange:l,onBlur:d,error:o.nism&&Boolean(s.nism),helperText:o.nism&&s.nism}),(0,f.jsx)(n.A,{fullWidth:!0,margin:"normal",name:"idType",label:"ID Type",value:a.idType||"",onChange:l,onBlur:d,error:o.idType&&Boolean(s.idType),helperText:o.idType&&s.idType})]}),(0,f.jsxs)(i.A,{sx:{display:"flex",justifyContent:"flex-end",marginTop:2,gap:2},children:[(0,f.jsx)(g.T,{type:"button",onPress:R,children:"Cancel"}),(0,f.jsx)(g.T,{type:"submit",children:"Add Broker"})]})]})}})]})}),(0,f.jsx)(i.A,{sx:{marginTop:4},children:(0,f.jsx)(c.A,{title:I,tableData:B})})]})})}},3934:(e,r,a)=>{a.d(r,{A:()=>g});var s=a(5043),t=a(9650),o=a(1596),n=a(1806),l=a(4882),i=a(8076),d=a(39),c=a(8093),m=a(3460),u=a(6519),p=a(728),h=a(579);const g=e=>{let{title:r=[],tableData:a=[],renderAction:g}=e;const[x,y]=(0,s.useState)(0),[j,b]=(0,s.useState)(5),[A,k]=(0,s.useState)({key:"",direction:"asc"}),N=s.useMemo((()=>A.key?[...a].sort(((e,r)=>e[A.key]<r[A.key]?"asc"===A.direction?-1:1:e[A.key]>r[A.key]?"asc"===A.direction?1:-1:0)):a),[a,A]).slice(x*j,x*j+j);return(0,h.jsxs)(t.A,{component:o.A,className:"custom",children:[(0,h.jsxs)(n.A,{children:[(0,h.jsx)(l.A,{children:(0,h.jsx)(i.A,{children:r.map(((e,r)=>(0,h.jsx)(d.A,{align:"center",sx:{fontWeight:"bold"},children:(0,h.jsx)(c.A,{active:A.key===e.toLowerCase(),direction:A.key===e.toLowerCase()?A.direction:"asc",onClick:()=>{return r=e.toLowerCase(),void k((e=>{const a=e.key===r&&"asc"===e.direction;return{key:r,direction:a?"desc":"asc"}}));var r},children:e})},r)))})}),(0,h.jsxs)(m.A,{children:[N.map(((e,r)=>(0,h.jsx)(i.A,{children:Object.keys(e).map(((a,s)=>["status","id","brokerId","fundAllocated"].includes(a)?null:(0,h.jsx)(d.A,{align:"center",children:"action"===a&&g?(0,h.jsx)(p.T,{isDisabled:3===e.status,onPress:()=>{return r=e.status,a=e.id,void(1===r?g(a):g());var r,a},children:1===e.status?"Release":"Released"}):e[a]},"".concat(r,"-").concat(s))))},r))),N&&0===N.length&&(0,h.jsx)(i.A,{style:{textAlign:"center"},children:(0,h.jsx)(d.A,{colSpan:r.length,className:"middle-noData",children:"No data found."})})]})]}),(0,h.jsx)(u.A,{component:"div",count:a.length,page:x,onPageChange:(e,r)=>{y(r)},rowsPerPage:j,onRowsPerPageChange:e=>{b(parseInt(e.target.value,10)),y(0)},rowsPerPageOptions:[5,10,15]})]})}},4957:(e,r,a)=>{a.d(r,{A:()=>t});const s=a(9722).A.create({baseURL:"http://43.204.150.47:8000",timeout:5e3});s.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e)),(e=>(console.error("Request Interceptor Error:",e),Promise.reject(e)))),s.interceptors.response.use((e=>(console.log("Response Interceptor: Response received"),e)),(e=>(e.response&&401===e.response.status?console.error("Response Interceptor: Unauthorized access - Redirecting to login"):console.error("Response Interceptor Error:",e.message),Promise.reject(e))));const t=s}}]);
//# sourceMappingURL=295.a94973ef.chunk.js.map