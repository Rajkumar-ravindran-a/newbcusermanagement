"use strict";(self.webpackChunkbcusermanagement=self.webpackChunkbcusermanagement||[]).push([[867],{8867:(r,e,n)=>{n.r(e),n.d(e,{default:()=>y});var a=n(5043),t=n(7392),o=n(7784),s=n(1906),d=n(9989),u=n(9014),i=n(4957),l=n(7488),g=n(1787),c=n(3892),p=n(899),F=n(4449),h=n(7353),b=n(5865),m=n(579);const x=p.Ik().shape({brokerName:p.Yj().required("Broker Name is required"),grossFund:p.ai().typeError("Gross Fund must be a number").min(0,"Gross Fund must be greater than or equal to 0").required("Gross Fund is required"),grossFundInterest:p.ai().typeError("Gross Fund Interest must be a number").min(0,"Interest must be at least 0%").max(100,"Interest cannot exceed 100%").required("Gross Fund Interest is required"),grossFundSharing:p.ai().typeError("Gross Fund Sharing must be a number").min(0,"Sharing must be at least 0%").max(100,"Sharing cannot exceed 100%").required("Gross Fund Sharing is required"),arbitrageFund:p.ai().typeError("Arbitrage Fund must be a number").min(0,"Arbitrage Fund must be greater than or equal to 0").required("Arbitrage Fund is required"),arbitrageFundInterest:p.ai().typeError("Arbitrage Fund Interest must be a number").min(0,"Interest must be at least 0%").max(100,"Interest cannot exceed 100%").required("Arbitrage Fund Interest is required"),arbitrageFundSharing:p.ai().typeError("Arbitrage Fund Sharing must be a number").min(0,"Sharing must be at least 0%").max(100,"Sharing cannot exceed 100%").required("Arbitrage Fund Sharing is required"),propFund:p.ai().typeError("Prop Fund must be a number").min(0,"Prop Fund must be greater than or equal to 0").required("Prop Fund is required"),propFundInterest:p.ai().typeError("Prop Fund Interest must be a number").min(0,"Interest must be at least 0%").max(100,"Interest cannot exceed 100%").required("Prop Fund Interest is required"),propFundSharing:p.ai().typeError("Prop Fund Sharing must be a number").min(0,"Sharing must be at least 0%").max(100,"Sharing cannot exceed 100%").required("Prop Fund Sharing is required"),costPerCr:p.ai().typeError("Cost must be a number").min(0,"Cost must be greater than or equal to 0").required("Cost is required")}),v=r=>{let{open:e,handleClose:n,onFormSubmit:a,brokerData:t}=r;const d={id:(null===t||void 0===t?void 0:t.id)||null,brokerName:(null===t||void 0===t?void 0:t.brokerName)||"",grossFund:(null===t||void 0===t?void 0:t.grossFund)||0,grossFundInterest:(null===t||void 0===t?void 0:t.grossFundInterest)||0,grossFundSharing:(null===t||void 0===t?void 0:t.grossFundSharing)||0,arbitrageFund:(null===t||void 0===t?void 0:t.arbitrageFund)||0,arbitrageFundInterest:(null===t||void 0===t?void 0:t.arbitrageFundInterest)||0,arbitrageFundSharing:(null===t||void 0===t?void 0:t.arbitrageFundSharing)||0,propFund:(null===t||void 0===t?void 0:t.propFund)||0,propFundInterest:(null===t||void 0===t?void 0:t.propFundInterest)||0,propFundSharing:(null===t||void 0===t?void 0:t.propFundSharing)||0,costPerCr:(null===t||void 0===t?void 0:t.costPerCr)||0};return(0,m.jsx)(F.A,{open:e,onClose:n,children:(0,m.jsxs)(h.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2,overflowY:"auto"},children:[(0,m.jsx)(b.A,{variant:"h6",sx:{marginBottom:"20px"},children:d.id?"Update Broker":"Add Broker"}),(0,m.jsx)(c.l1,{initialValues:d,validationSchema:x,onSubmit:async(r,e)=>{let{resetForm:t}=e;try{r.id?(await i.A.put("/updateBroker/".concat(r.id),r),l.oR.success("Broker updated successfully.")):(await i.A.post("/createBroker",r),l.oR.success("Broker added successfully.")),a(),t(),n()}catch(u){var o,s,d;console.error(null===u||void 0===u||null===(o=u.response)||void 0===o?void 0:o.data),l.oR.error((null===u||void 0===u||null===(s=u.response)||void 0===s||null===(d=s.data)||void 0===d?void 0:d.detail)||"An error occurred.")}},enableReinitialize:!0,children:r=>{let{values:e,errors:a,touched:t,handleChange:u,handleBlur:i,setFieldValue:l}=r;return(0,m.jsx)(c.lV,{children:(0,m.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,m.jsx)(o.A,{name:"brokerName",label:"Broker Name",value:e.brokerName,onChange:r=>{const e=r.target.value.toUpperCase();l("brokerName",e)},onBlur:i,error:t.brokerName&&Boolean(a.brokerName),helperText:t.brokerName&&a.brokerName,fullWidth:!0,inputProps:{style:{textTransform:"uppercase"}}}),(0,m.jsxs)("div",{className:"flex gap-4",children:[(0,m.jsx)(o.A,{name:"grossFund",label:"Gross Fund (1Cr)",value:e.grossFund,onChange:u,onBlur:i,error:t.grossFund&&Boolean(a.grossFund),helperText:t.grossFund&&a.grossFund,fullWidth:!0}),(0,m.jsx)(o.A,{name:"grossFundInterest",label:"Interest (%)",value:e.grossFundInterest,onChange:u,onBlur:i,error:t.grossFundInterest&&Boolean(a.grossFundInterest),helperText:t.grossFundInterest&&a.grossFundInterest,fullWidth:!0}),(0,m.jsx)(o.A,{name:"grossFundSharing",label:"Sharing (%)",value:e.grossFundSharing,onChange:u,onBlur:i,error:t.grossFundSharing&&Boolean(a.grossFundSharing),helperText:t.grossFundSharing&&a.grossFundSharing,fullWidth:!0})]}),(0,m.jsxs)("div",{className:"flex gap-4",children:[(0,m.jsx)(o.A,{name:"arbitrageFund",label:"Arbitrage Fund (1Cr)",value:e.arbitrageFund,onChange:u,onBlur:i,error:t.arbitrageFund&&Boolean(a.arbitrageFund),helperText:t.arbitrageFund&&a.arbitrageFund,fullWidth:!0}),(0,m.jsx)(o.A,{name:"arbitrageFundInterest",label:"Interest (%)",value:e.arbitrageFundInterest,onChange:u,onBlur:i,error:t.arbitrageFundInterest&&Boolean(a.arbitrageFundInterest),helperText:t.arbitrageFundInterest&&a.arbitrageFundInterest,fullWidth:!0}),(0,m.jsx)(o.A,{name:"arbitrageFundSharing",label:"Sharing (%)",value:e.arbitrageFundSharing,onChange:u,onBlur:i,error:t.arbitrageFundSharing&&Boolean(a.arbitrageFundSharing),helperText:t.arbitrageFundSharing&&a.arbitrageFundSharing,fullWidth:!0})]}),(0,m.jsxs)("div",{className:"flex gap-4",children:[(0,m.jsx)(o.A,{name:"propFund",label:"Prop Fund (1Cr)",value:e.propFund,onChange:u,onBlur:i,error:t.propFund&&Boolean(a.propFund),helperText:t.propFund&&a.propFund,fullWidth:!0}),(0,m.jsx)(o.A,{name:"propFundInterest",label:"Interest (%)",value:e.propFundInterest,onChange:u,onBlur:i,error:t.propFundInterest&&Boolean(a.propFundInterest),helperText:t.propFundInterest&&a.propFundInterest,fullWidth:!0}),(0,m.jsx)(o.A,{name:"propFundSharing",label:"Sharing (%)",value:e.propFundSharing,onChange:u,onBlur:i,error:t.propFundSharing&&Boolean(a.propFundSharing),helperText:t.propFundSharing&&a.propFundSharing,fullWidth:!0})]}),(0,m.jsx)(o.A,{name:"costPerCr",label:"Cost Per Cr",value:e.costPerCr,onChange:u,onBlur:i,error:t.costPerCr&&Boolean(a.costPerCr),helperText:t.costPerCr&&a.costPerCr,fullWidth:!0,margin:"normal"}),(0,m.jsxs)("div",{className:"flex justify-end gap-4 mt-4",children:[(0,m.jsx)(s.A,{variant:"contained",color:"secondary",onClick:n,children:"Cancel"}),(0,m.jsx)(s.A,{type:"submit",variant:"contained",color:"primary",children:d.id?"Update Broker":"Add Broker"})]})]})})}})]})})};var S=n(94),I=n(5394),A=n(5051),k=n(5732),C=n(247),j=n(5218),B=n(4051);const f=["BrokerName","GrossFund","ArbitrageFund","PropFund","CostPerCr","Total Fund","Action"],y=()=>{const[r,e]=(0,a.useState)([]),[n,c]=(0,a.useState)(null),[p,F]=(0,a.useState)(!1),[h,b]=(0,a.useState)(null),x=(0,a.useCallback)((async()=>{F(!0);try{const a=await i.A.get("/getAllBroker");if(200===a.status){var r,n;const o=null===(r=a.data)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.map((r=>({"Broker Name":r.brokerName,"Gross Fund":void 0!==r.grossFund?"I ".concat(r.grossFundInterest," | F ").concat(r.grossFund," | S ").concat(r.grossFundSharing):"-","Arbitrage Fund":void 0!==r.arbitrageFund?"I ".concat(r.arbitrageFundInterest," | F ").concat(r.arbitrageFund," | S ").concat(r.arbitrageFundSharing):"-","Prop Fund":void 0!==r.propFund?"I ".concat(r.propFundInterest," | F ").concat(r.propFund," | S ").concat(r.propFundSharing):"-","Cost Per Cr":r.costPerCr||"-","Total Fund":void 0!==r.grossFund&&void 0!==r.arbitrageFund&&void 0!==r.propFund?r.grossFund+r.arbitrageFund+r.propFund:"-",Action:(0,m.jsxs)(k.A,{children:[(0,m.jsx)(C.b,{children:(0,m.jsx)(t.A,{children:(0,m.jsx)(A.txp,{})})}),(0,m.jsxs)(j.y,{"aria-label":"Action menu",onAction:e=>y(e,r),children:[(0,m.jsx)(B.Y,{isDisabled:3===r.status,children:"Release"},"release"),(0,m.jsx)(B.Y,{isDisabled:3===r.status,children:"Edit"},"edit")]})]})})));e(o)}else l.oR.error("Failed to fetch broker data.")}catch(a){console.error(a),l.oR.error("Error fetching broker data.")}finally{F(!1)}}),[]),y=(r,e)=>{"release"===r?q(e):"edit"===r&&(b(e),c(document.body))},q=async r=>{try{200===(await i.A.put("/releaseBroker/".concat(r.id,"/3"))).status&&(l.oR.success('Broker "'.concat(r.brokerName,'" released successfully.')),x())}catch(e){console.error(e),l.oR.error("Error releasing broker.")}};return(0,a.useEffect)((()=>{x()}),[x]),(0,m.jsx)(u.A,{pageTitle:"Brokers",pageSubtitle:"Add, view, and release brokers",children:(0,m.jsxs)(S.Z,{className:"settings-mainCard",style:{marginTop:"1rem",width:"100%",overflowY:"scroll"},children:[(0,m.jsxs)("div",{className:"flex justify-between p-2 align-middle broker-form",children:[(0,m.jsx)(o.A,{className:"searchUser",placeholder:"Search",InputProps:{startAdornment:(0,m.jsx)(g.A,{position:"start",children:(0,m.jsx)(I.zfp,{})})}}),(0,m.jsx)(s.A,{variant:"contained",color:"primary",onClick:r=>c(r.currentTarget),startIcon:(0,m.jsx)(I.QwN,{}),children:"Add Broker"})]}),(0,m.jsx)(v,{anchorEl:n,open:Boolean(n),handleClose:()=>{c(null),b(null)},onFormSubmit:x,brokerData:h}),(0,m.jsx)("div",{className:"mt-4",children:(0,m.jsx)(d.A,{columnWidths:["10%","10%","10%","10%","15%","10%","10%","10%","40%","15%","10%"],title:f,tableData:r,loading:p})})]})})}}}]);
//# sourceMappingURL=867.a29a3b56.chunk.js.map