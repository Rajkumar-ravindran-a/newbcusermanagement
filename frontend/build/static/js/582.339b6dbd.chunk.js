"use strict";(self.webpackChunkbcusermanagement=self.webpackChunkbcusermanagement||[]).push([[582],{582:(e,r,s)=>{s.r(r),s.d(r,{default:()=>B});var a=s(9379),t=s(3892),o=s(899),n=s(5865),l=s(5043),c=s(9650),d=s(1596),i=s(1806),u=s(4882),m=s(8076),h=s(39),b=s(3460),k=s(728),A=s(579);const p=e=>{let{title:r=[],tableData:s=[],renderAction:a}=e;return(0,A.jsx)(c.A,{component:d.A,className:"custom",children:(0,A.jsxs)(i.A,{children:[(0,A.jsx)(u.A,{children:(0,A.jsx)(m.A,{children:r.map(((e,r)=>(0,A.jsx)(h.A,{align:"center",sx:{fontWeight:"bold"},children:e},r)))})}),(0,A.jsx)(b.A,{children:s.map(((e,r)=>(0,A.jsx)(m.A,{children:Object.keys(e).map(((s,t)=>"status"===s||"id"===s?null:(0,A.jsx)(h.A,{align:"center",children:"action"===s&&a?(0,A.jsx)(k.T,{isDisabled:3==e.status,onPress:()=>{1==e.status?a(e.id):a()},children:1==e.status?"Release":"Released"}):e[s]},"".concat(r,"-").concat(t))))},r)))})]})})};var x=s(5861),g=s(94),j=s(4673),f=s(4957),N=s(7488);const I=o.Ik().shape({brokerId:o.Yj().required("ID is required"),brokerName:o.Yj().required("Broker Name is required"),fundAllocated:o.ai().typeError("Funds Allocated must be a number").required("Funds Allocated is required")}),R=["ID","Broker Name","Funds Allocated","Start Date","Release Date","Action"],B=()=>{const[e,r]=(0,l.useState)([]),s=async r=>{try{console.log(e);const s=await f.A.put("/releaseBroker/".concat(r,"/",3));console.log(s),200===s.status&&(o(),N.oR.info("Releasing broker: ".concat(r)))}catch(s){console.error(s),N.oR.error(s.message)}console.warn("Releasing Broker:",r)},o=async()=>{try{const e=(await f.A.get("/getAllBroker")).data.data.map((e=>(0,a.A)((0,a.A)({},e),{},{action:()=>s(e)})));r(e)}catch(e){console.error(e),N.oR.error(e.message)}};(0,l.useEffect)((()=>{o()}),[]);return(0,A.jsx)(x.A,{pageTitle:"Settings",pageSubtitle:"Configurable parameters",children:(0,A.jsx)(g.Z,{className:"settings-mainCard",children:(0,A.jsxs)(g.Z,{children:[(0,A.jsx)(n.A,{variant:"h6",className:"broker-title",children:"Brokers"}),(0,A.jsx)(t.l1,{initialValues:{brokerId:"",brokerName:"",fundAllocated:""},validationSchema:I,onSubmit:async(e,r)=>{let{resetForm:s}=r;try{const r=await f.A.post("/createBroker",e);200===r.status&&(N.oR.success(r.data.message),o()),s()}catch(a){console.error(a),N.oR.error("Error adding broker")}},children:e=>{let{values:r,errors:s,touched:a,handleChange:o,handleBlur:n}=e;return(0,A.jsxs)(t.lV,{className:"broker-form flex gap-3",children:[(0,A.jsx)("div",{className:"flex-1",children:(0,A.jsx)(j.r,{name:"brokerId",label:"ID",value:r.brokerId,onChange:o,onBlur:n,error:a.brokerId&&s.brokerId,helperText:a.brokerId&&s.brokerId})}),(0,A.jsx)("div",{className:"flex-1",children:(0,A.jsx)(j.r,{name:"brokerName",label:"Broker Name",value:r.brokerName,onChange:o,onBlur:n,error:a.brokerName&&s.brokerName,helperText:a.brokerName&&s.brokerName})}),(0,A.jsx)("div",{className:"flex-1",children:(0,A.jsx)(j.r,{name:"fundAllocated",label:"Funds Allocated",value:r.fundAllocated,onChange:o,onBlur:n,error:a.fundAllocated&&s.fundAllocated,helperText:a.fundAllocated&&s.fundAllocated})}),(0,A.jsx)(k.T,{type:"submit",className:"submit-btn",children:"Add Broker"})]})}}),(0,A.jsx)("div",{className:"mt-4",children:(0,A.jsx)(p,{title:R,tableData:e,renderAction:s})})]})})})}},4957:(e,r,s)=>{s.d(r,{A:()=>t});const a=s(9722).A.create({baseURL:"http://13.233.131.250:8000",timeout:5e3});a.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e)),(e=>(console.error("Request Interceptor Error:",e),Promise.reject(e)))),a.interceptors.response.use((e=>(console.log("Response Interceptor: Response received"),e)),(e=>(e.response&&401===e.response.status?console.error("Response Interceptor: Unauthorized access - Redirecting to login"):console.error("Response Interceptor Error:",e.message),Promise.reject(e))));const t=a}}]);
//# sourceMappingURL=582.339b6dbd.chunk.js.map