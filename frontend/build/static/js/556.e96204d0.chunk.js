"use strict";(self.webpackChunkbcusermanagement=self.webpackChunkbcusermanagement||[]).push([[556],{7131:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(4449),l=(a(5043),a(7353)),s=a(579);const o={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:"1rem"},n=e=>{let{open:t,handleClose:a,children:n}=e;return(0,s.jsx)(r.A,{open:t,onClose:a,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,s.jsx)(l.A,{sx:o,children:n})})}},2549:(e,t,a)=>{a(5043),a(579)},8556:(e,t,a)=>{a.r(t),a.d(t,{default:()=>M});var r=a(9379),l=a(5043),s=(a(2549),a(3892)),o=a(899),n=a(4974),i=a(2235),d=a(6510),c=a(5191),u=a(652),p=a(3453),h=a(2289),m=a(5865),b=a(7561),g=a(9190),v=a(2268),x=a(8988),y=a(7784),j=a(1906),A=a(7392),f=a(7131),w=a(7488),V=a(4957),C=a(8330),I=a(423),S=a(4420),k=a(5051),D=a(5732),N=a(247),B=a(5218),R=a(4051),q=a(579);const M=()=>{const[e,t]=(0,l.useState)([]),[a,M]=(0,l.useState)([]),[T,O]=(0,l.useState)([]),[E,L]=(0,l.useState)([]),[W,U]=(0,l.useState)(1),[G,P]=(0,l.useState)(!1),[Y,z]=(0,l.useState)([]),[F,X]=(0,l.useState)(!1),[_,H]=(0,l.useState)(null),J=localStorage.getItem("token"),K=(0,S.s)(J),Q=async()=>{const e=await V.A.get("/getTrade",{headers:{Authorization:"bearer ".concat(J)}});200===e.status&&t(e.data)},Z=async e=>{var t;const a=await V.A.get("/getIdsByBroker/".concat(e));console.log(a.data),200===a.status?(a.data.data?O(a.data.data):(w.oR.error("No id associated for this user."),O([])),console.log(a.data,"in 200")):404===(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.status_code)?(w.oR.error("No id associated for this user."),O([])):O([])};(0,l.useEffect)((()=>{Q(),(async()=>{try{const e=await V.A.get("/getAllBroker?status=1");M(e.data.data),L(e.data.data)}catch(e){console.log(e)}})(),le()}),[]);const $=Math.ceil(e.length/4),ee=l.useMemo((()=>{const t=4*(W-1),a=t+4;return e.slice(t,a)}),[W,e]),te=()=>{P(!1),X(!1)};(0,l.useEffect)((()=>{console.log(_)}),[_]);const ae=o.Ik().shape({broker:o.Yj().required("Broker is required"),tradeId:o.Yj().required("ID is required"),strategy:o.Yj().required("Strategy is required"),counter:o.ai().required("Counter is required").positive("Must be positive"),buyValue:o.ai().required("Buy Value is required").positive("Must be positive"),sellValue:o.ai().required("Sell Value is required"),dealer:o.Yj().required("Dealer is required"),pl:o.ai().required("P/L is required")});let re=F?{id:_.id,Date:new Date(_.Date),broker:_.broker||null,brokerId:_.brokerId||null,tradeId:_.tradeId||null,strategy:_.strategy||null,counter:_.counter||null,buyValue:_.buyValue||null,sellValue:_.sellValue||null,dealer:K.fullName||null,pl:_.pl||0}:{Date:new Date,broker:"",brokerId:null,tradeId:null,strategy:"",counter:"",buyValue:"",sellValue:"",dealer:K.fullName,pl:0};const le=async()=>{try{const e=await V.A.get("/getStrategies");if(console.log(e),200===e.status){const t=e.data.map((e=>({"Strategy Id":e.id,"Strategy Name":e.StrategyName})));z(t)}}catch(e){console.error("Error fetching strategies:",e)}};return(0,q.jsxs)(C.A,{pageTitle:"Data Management",pageSubtitle:"Enter trade datas",children:[(0,q.jsxs)(f.A,{open:G,handleClose:te,children:[(0,q.jsx)(m.A,{variant:"h6",className:"mb-2",children:"Add Data"}),(0,q.jsx)(s.l1,{initialValues:re,validationSchema:ae,onSubmit:async e=>{const t=(0,r.A)((0,r.A)({},e),{},{Date:e.Date?(a=e.Date,new Date(a).toISOString().slice(0,19).replace("T"," ")):null});var a;if(F){200===(await V.A.put("/update_trade/".concat(t.id),t)).status&&(Q(),w.oR.success("Data Updated successfully"),te(),O([]))}else{200===(await V.A.post("/create_trade",t)).status&&(Q(),w.oR.success("Data added successfully"),te(),O([]))}},children:e=>{let{values:t,errors:a,touched:r,setFieldValue:l}=e;const o=(e,t)=>t-e;return(0,q.jsxs)(s.lV,{children:[(0,q.jsxs)("div",{className:"flex gap-3 mb-3",children:[(0,q.jsxs)(b.A,{fullWidth:!0,children:[(0,q.jsx)(g.A,{children:"Broker"}),(0,q.jsx)(v.A,{name:"broker",value:t.brokerId,label:"Broker",onChange:e=>{const t=E.find((t=>t.id===e.target.value));l("brokerId",(null===t||void 0===t?void 0:t.id)||""),l("broker",(null===t||void 0===t?void 0:t.brokerName)||""),Z(null===t||void 0===t?void 0:t.id)},error:r.broker&&Boolean(a.broker),children:E.map((e=>(0,q.jsx)(x.A,{value:e.id,children:e.brokerName},e.id)))})]}),(0,q.jsxs)(b.A,{fullWidth:!0,children:[(0,q.jsx)(g.A,{children:"ID"}),(0,q.jsx)(v.A,{name:"tradeId",label:"Id",value:t.tradeId,onChange:e=>l("tradeId",e.target.value),error:r.tradeId&&Boolean(a.tradeId),children:T.map(((e,t)=>(0,q.jsx)(x.A,{value:e.idNumber,children:e.idNumber},t)))})]})]}),(0,q.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,q.jsx)(y.A,{fullWidth:!0,name:"dealer",label:"Dealer",value:t.dealer,onChange:e=>l("dealer",e.target.value),error:r.dealer&&Boolean(a.dealer),helperText:r.dealer&&a.dealer,disabled:!0}),(0,q.jsxs)(b.A,{fullWidth:!0,children:[(0,q.jsx)(g.A,{children:"Strategy"}),(0,q.jsx)(v.A,{name:"strategy",label:"Strategy",value:t.strategy,onChange:e=>l("strategy",e.target.value),error:r.strategy&&Boolean(a.strategy),children:Y.map((e=>{var t;return(0,q.jsx)(x.A,{value:e["Strategy Name"],children:null===(t=e["Strategy Name"])||void 0===t?void 0:t.toUpperCase()},e["Strategy Name"])}))})]}),(0,q.jsx)(y.A,{fullWidth:!0,name:"counter",label:"Margin",value:t.counter,onChange:e=>l("counter",e.target.value),error:r.counter&&Boolean(a.counter),helperText:r.counter&&a.counter})]}),(0,q.jsxs)("div",{className:"flex gap-3 mb-3",children:[(0,q.jsx)(y.A,{fullWidth:!0,name:"buyValue",label:"Buy Value",value:t.buyValue,type:"number",onChange:e=>{l("buyValue",e.target.value),l("pl",o(e.target.value,t.sellValue))},error:r.buyValue&&Boolean(a.buyValue),helperText:r.buyValue&&a.buyValue}),(0,q.jsx)(y.A,{fullWidth:!0,name:"sellValue",label:"Sell Value",type:"number",value:t.sellValue,onChange:e=>{l("sellValue",e.target.value),l("pl",o(t.buyValue,e.target.value))},error:r.sellValue&&Boolean(a.sellValue),helperText:r.sellValue&&a.sellValue}),(0,q.jsx)(y.A,{fullWidth:!0,name:"pl",label:"P/L",value:t.pl,error:r.pl&&Boolean(a.pl),helperText:r.pl&&a.pl,disabled:!0})]}),(0,q.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,q.jsx)(j.A,{variant:"contained",type:"submit",children:"Submit Data"}),(0,q.jsx)(j.A,{variant:"outlined",onClick:te,children:"Cancel"})]})]})}})]}),(0,q.jsxs)("div",{className:"w-full",children:[(0,q.jsx)("div",{className:"flex justify-between flex-row-reverse",children:(0,q.jsx)(j.A,{variant:"contained",className:"mb-3 mt-3",startIcon:(0,q.jsx)(I.n4h,{}),onClick:()=>P(!0),children:"Submit Data"})}),(0,q.jsxs)(n.j,{"aria-label":"Example table with client-side pagination",bottomContent:(0,q.jsx)("div",{className:"flex w-full justify-center",children:(0,q.jsx)(i.T,{isCompact:!0,showControls:!0,showShadow:!0,color:"secondary",page:W,total:$,onChange:e=>U(e)})}),children:[(0,q.jsxs)(d.X,{children:[(0,q.jsx)(c.e,{children:"Broker Name"}),(0,q.jsx)(c.e,{children:"Trade ID"}),(0,q.jsx)(c.e,{children:"Dealer"}),(0,q.jsx)(c.e,{children:"Buy Value"}),(0,q.jsx)(c.e,{children:"Sell Value"}),(0,q.jsx)(c.e,{children:"Strategy"}),(0,q.jsx)(c.e,{children:"P/L"}),(0,q.jsx)(c.e,{children:"Date"}),(0,q.jsx)(c.e,{children:"Actions"})]}),(0,q.jsx)(u.E,{children:ee.map(((e,t)=>{var a,r,l,s,o;return(0,q.jsxs)(p.s,{children:[(0,q.jsx)(h.w,{children:null===(a=e.broker)||void 0===a?void 0:a.toUpperCase()}),(0,q.jsx)(h.w,{children:null===(r=e.tradeId)||void 0===r?void 0:r.toUpperCase()}),(0,q.jsx)(h.w,{children:null===(l=e.dealer)||void 0===l?void 0:l.toUpperCase()}),(0,q.jsx)(h.w,{children:e.buyValue}),(0,q.jsx)(h.w,{children:e.sellValue}),(0,q.jsx)(h.w,{children:null===(s=e.strategy)||void 0===s?void 0:s.toUpperCase()}),(0,q.jsx)(h.w,{children:e.sellValue-e.buyValue}),(0,q.jsx)(h.w,{children:null===(o=e.Date)||void 0===o?void 0:o.toUpperCase()}),(0,q.jsx)(h.w,{children:(0,q.jsxs)(D.A,{children:[(0,q.jsx)(N.b,{children:(0,q.jsx)(A.A,{children:(0,q.jsx)(k.txp,{})})}),(0,q.jsxs)(B.y,{"aria-label":"Action event example",onAction:t=>{"delete"===t?(async e=>{try{200===(await V.A.delete("/delete_trade/".concat(e.id))).status&&(Q(),w.oR.success("Data deleted successfully"))}catch(t){console.error("Error deleting data:",t)}})(e):"edit"===t&&((async e=>{P(!0),H(e),re.brokerId=Z(e.brokerId)})(e),X(!0))},children:[(0,q.jsx)(R.Y,{isDisabled:3===e.status,children:"Delete"},"delete"),(0,q.jsx)(R.Y,{isDisabled:3===e.status,children:"Edit"},"edit")]})]})})]},t)}))})]})]})]})}},4957:(e,t,a)=>{a.d(t,{A:()=>l});const r=a(9722).A.create({baseURL:"http://43.204.150.47:8000",timeout:5e3});r.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e)),(e=>(console.error("Request Interceptor Error:",e),Promise.reject(e)))),r.interceptors.response.use((e=>(console.log("Response Interceptor: Response received"),e)),(e=>(e.response&&401===e.response.status?(window.location.href="/",console.error("Response Interceptor: Unauthorized access - Redirecting to login")):console.error("Response Interceptor Error:",e.message),Promise.reject(e))));const l=r},8988:(e,t,a)=>{a.d(t,{A:()=>S});var r=a(45),l=a(9379),s=a(5043),o=a(8387),n=a(8610),i=a(1546),d=a(1475),c=a(2108),u=a(6262),p=a(8206),h=a(1347),m=a(408),b=a(5013),g=a(5849),v=a(2532);const x=(0,v.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const y=(0,v.A)("MuiListItemIcon",["root","alignItemsFlexStart"]);const j=(0,v.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);var A=a(2372);function f(e){return(0,A.Ay)("MuiMenuItem",e)}const w=(0,v.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var V=a(579);const C=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],I=(0,c.Ay)(m.A,{shouldForwardProp:e=>(0,d.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((0,u.A)((e=>{let{theme:t}=e;return(0,l.A)((0,l.A)({},t.typography.body1),{},{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(w.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,i.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(w.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,i.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(w.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,i.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,i.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(w.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(w.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(x.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(x.inset)]:{marginLeft:52},["& .".concat(j.root)]:{marginTop:0,marginBottom:0},["& .".concat(j.inset)]:{paddingLeft:36},["& .".concat(y.root)]:{minWidth:36},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return!t.dense},style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:t}=e;return t.dense},style:(0,l.A)((0,l.A)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2),{},{["& .".concat(y.root," svg")]:{fontSize:"1.25rem"}})}]})}))),S=s.forwardRef((function(e,t){const a=(0,p.b)({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:d="li",dense:c=!1,divider:u=!1,disableGutters:m=!1,focusVisibleClassName:v,role:x="menuitem",tabIndex:y,className:j}=a,A=(0,r.A)(a,C),w=s.useContext(h.A),S=s.useMemo((()=>({dense:c||w.dense||!1,disableGutters:m})),[w.dense,c,m]),k=s.useRef(null);(0,b.A)((()=>{i&&k.current&&k.current.focus()}),[i]);const D=(0,l.A)((0,l.A)({},a),{},{dense:S.dense,divider:u,disableGutters:m}),N=(e=>{const{disabled:t,dense:a,divider:r,disableGutters:s,selected:o,classes:i}=e,d={root:["root",a&&"dense",t&&"disabled",!s&&"gutters",r&&"divider",o&&"selected"]},c=(0,n.A)(d,f,i);return(0,l.A)((0,l.A)({},i),c)})(a),B=(0,g.A)(k,t);let R;return a.disabled||(R=void 0!==y?y:-1),(0,V.jsx)(h.A.Provider,{value:S,children:(0,V.jsx)(I,(0,l.A)((0,l.A)({ref:B,role:x,tabIndex:R,component:d,focusVisibleClassName:(0,o.A)(N.focusVisible,v),className:(0,o.A)(N.root,j)},A),{},{ownerState:D,classes:N}))})}))}}]);
//# sourceMappingURL=556.e96204d0.chunk.js.map