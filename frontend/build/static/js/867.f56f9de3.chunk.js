"use strict";(self.webpackChunkbcusermanagement=self.webpackChunkbcusermanagement||[]).push([[867],{8867:(e,r,a)=>{a.r(r),a.d(r,{default:()=>v});var o=a(5043),n=a(1906),s=a(7784),t=a(3934),l=a(8967),i=a(4957),d=a(7488),c=a(1787),u=a(3892),p=a(899),g=a(4449),m=a(7353),h=a(5865),b=a(579);const x=p.Ik().shape({brokerName:p.Yj().required("Broker Name is required"),grossFund:p.ai().typeError("Gross Fund must be a number").required("Gross Fund is required"),arbitrageFund:p.ai().typeError("Arbitrage Fund must be a number").required("Arbitrage Fund is required"),propFund:p.ai().typeError("Prop Fund must be a number").required("Prop Fund is required")}),k=e=>{let{open:r,handleClose:a,onFormSubmit:o}=e;return(0,b.jsx)(g.A,{open:r,onClose:a,children:(0,b.jsxs)(m.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2,overflowY:"scroll"},children:[(0,b.jsx)(h.A,{variant:"h6",sx:{marginBottom:"20px"},children:"Add Broker"}),(0,b.jsx)(u.l1,{initialValues:{brokerName:"",grossFund:"",arbitrageFund:"",propFund:""},validationSchema:x,onSubmit:async(e,r)=>{let{resetForm:n}=r;try{await i.A.post("/createBroker",e),d.oR.success("Broker added successfully."),o(),n(),a()}catch(s){d.oR.error("Error adding broker.")}},children:e=>{let{values:r,errors:o,touched:t,handleChange:l,handleBlur:i,setFieldValue:d}=e;return(0,b.jsxs)(u.lV,{children:[(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)(s.A,{name:"brokerName",label:"Broker Name",value:r.brokerName,onChange:l,onBlur:i,error:t.brokerName&&Boolean(o.brokerName),helperText:t.brokerName&&o.brokerName,fullWidth:!0,margin:"normal"}),(0,b.jsx)(s.A,{name:"grossFund",label:"Gross Fund",value:r.grossFund,onChange:e=>{const r=e.target.value.replace(/[^0-9]/g,"");d("grossFund",r)},onBlur:i,error:t.grossFund&&Boolean(o.grossFund),helperText:t.grossFund&&o.grossFund,fullWidth:!0,margin:"normal"}),(0,b.jsx)(s.A,{name:"arbitrageFund",label:"Arbitrage Fund",value:r.arbitrageFund,onChange:e=>{const r=e.target.value.replace(/[^0-9]/g,"");d("arbitrageFund",r)},onBlur:i,error:t.arbitrageFund&&Boolean(o.arbitrageFund),helperText:t.arbitrageFund&&o.arbitrageFund,fullWidth:!0,margin:"normal"}),(0,b.jsx)(s.A,{name:"propFund",label:"Prop Fund",value:r.propFund,onChange:e=>{const r=e.target.value.replace(/[^0-9]/g,"");d("propFund",r)},onBlur:i,error:t.propFund&&Boolean(o.propFund),helperText:t.propFund&&o.propFund,fullWidth:!0,margin:"normal"})]}),(0,b.jsxs)("div",{style:{marginTop:"20px"},children:[(0,b.jsx)(n.A,{variant:"contained",color:"secondary",onClick:a,style:{marginRight:"10px"},children:"Cancel"}),(0,b.jsx)(n.A,{type:"submit",variant:"contained",color:"primary",children:"Add Broker"})]})]})}})]})})};var A=a(94),F=a(5394);const j=["Broker Name","Start Date","Release Date","Gross Fund","Arbitrage Fund","Total Fund","Prop Fund","Action"],v=()=>{const[e,r]=(0,o.useState)([]),[a,u]=(0,o.useState)(null),p=async()=>{try{const a=await i.A.get("/getAllBroker");if(200===a.status){var e;const o=null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data.map((e=>({"Broker Name":e.brokerName,"Start Date":e.startDate||"-","Release Date":e.releaseDate||"-","Gross Fund":e.grossfund||"-","Arbitrage Fund":e.arbitragefund||"-","Prop Fund":e.propfund||"-","Total Fund":e.grossfund+e.arbitragefund||"-",Action:(0,b.jsx)("div",{className:"action-buttons",children:(0,b.jsx)(n.A,{onClick:()=>g(e),size:"small",variant:"contained",color:"primary",disabled:3===e.status,children:3===e.status?"Released":"Release"},"release-".concat(e.id))},"action-".concat(e.id))})));r(o)}}catch(a){console.error(a),d.oR.error("Error fetching broker data.")}},g=async e=>{try{console.log(e.id,"====================");200===(await i.A.put("/releaseBroker/".concat(e.id,"/3"))).status&&(d.oR.success("Released broker: ".concat(e.brokerName)),p())}catch(r){console.error(r),d.oR.error("Error releasing broker.")}};(0,o.useEffect)((()=>{p()}),[]);return(0,b.jsx)(l.A,{pageTitle:"Brokers",pageSubtitle:"Add, view and release brokers",children:(0,b.jsxs)(A.Z,{classNames:"settings-mainCard",style:{marginTop:"1rem"},children:[(0,b.jsxs)("div",{className:"flex justify-between p-4 align-middle broker-form",children:[(0,b.jsx)(s.A,{className:"searchUser",placeholder:"Search",InputProps:{startAdornment:(0,b.jsx)(c.A,{position:"start",children:(0,b.jsx)(F.zfp,{})})}}),(0,b.jsx)(n.A,{variant:"contained",color:"primary",onClick:e=>{u(e.currentTarget)},children:"Add Broker"})]}),(0,b.jsx)(k,{anchorEl:a,open:Boolean(a),handleClose:()=>{u(null)},onFormSubmit:p}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(t.A,{title:j,tableData:e})})]})})}},3934:(e,r,a)=>{a.d(r,{A:()=>h});var o=a(5043),n=a(9650),s=a(1596),t=a(1806),l=a(4882),i=a(8076),d=a(39),c=a(8093),u=a(3460),p=a(1463),g=a(728),m=a(579);const h=e=>{let{title:r=[],tableData:a=[],renderAction:h}=e;const[b,x]=(0,o.useState)(0),[k,A]=(0,o.useState)(5),[F,j]=(0,o.useState)({key:"",direction:"asc"}),v=o.useMemo((()=>F.key?[...a].sort(((e,r)=>e[F.key]<r[F.key]?"asc"===F.direction?-1:1:e[F.key]>r[F.key]?"asc"===F.direction?1:-1:0)):a),[a,F]).slice(b*k,b*k+k);return(0,m.jsxs)(n.A,{component:s.A,className:"custom",children:[(0,m.jsxs)(t.A,{children:[(0,m.jsx)(l.A,{children:(0,m.jsx)(i.A,{children:r.map(((e,r)=>(0,m.jsx)(d.A,{align:"center",sx:{fontWeight:"bold"},children:(0,m.jsx)(c.A,{active:F.key===e.toLowerCase(),direction:F.key===e.toLowerCase()?F.direction:"asc",onClick:()=>{return r=e.toLowerCase(),void j((e=>{const a=e.key===r&&"asc"===e.direction;return{key:r,direction:a?"desc":"asc"}}));var r},children:e})},r)))})}),(0,m.jsxs)(u.A,{children:[v.map(((e,r)=>(0,m.jsx)(i.A,{children:Object.keys(e).map(((a,o)=>["status","id","brokerId","fundAllocated","Record Id"].includes(a)?null:(0,m.jsx)(d.A,{align:"center",children:"action"===a&&h?(0,m.jsx)(g.T,{isDisabled:3===e.status,onPress:()=>{return r=e.status,a=e.id,void(1===r?h(a):h());var r,a},children:1===e.status?"Release":"Released"}):e[a]},"".concat(r,"-").concat(o))))},r))),v&&0===v.length&&(0,m.jsx)(i.A,{style:{textAlign:"center"},children:(0,m.jsx)(d.A,{colSpan:r.length,className:"middle-noData",children:"No data found."})})]})]}),(0,m.jsx)(p.A,{component:"div",count:a.length,page:b,onPageChange:(e,r)=>{x(r)},rowsPerPage:k,onRowsPerPageChange:e=>{A(parseInt(e.target.value,10)),x(0)},rowsPerPageOptions:[5,10,15]})]})}},4957:(e,r,a)=>{a.d(r,{A:()=>n});const o=a(9722).A.create({baseURL:"http://43.204.150.47:8000",timeout:5e3});o.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e)),(e=>(console.error("Request Interceptor Error:",e),Promise.reject(e)))),o.interceptors.response.use((e=>(console.log("Response Interceptor: Response received"),e)),(e=>(e.response&&401===e.response.status?console.error("Response Interceptor: Unauthorized access - Redirecting to login"):console.error("Response Interceptor Error:",e.message),Promise.reject(e))));const n=o}}]);
//# sourceMappingURL=867.f56f9de3.chunk.js.map