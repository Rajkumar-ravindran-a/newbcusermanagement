"use strict";(self.webpackChunkbcusermanagement=self.webpackChunkbcusermanagement||[]).push([[295],{9295:(e,t,r)=>{r.r(t),r.d(t,{default:()=>B});var a=r(5043),o=r(3892),n=r(899),s=r(7392),i=r(7784),l=r(1787),c=r(7561),d=r(2268),p=r(8988),u=r(1906),m=r(7353),h=r(4449),v=r(5865),y=r(9190),A=r(4054),b=r(4157),x=r(8330),g=r(4957),f=r(7488),j=r(94),I=r(5394),k=r(5051),N=r(5732),S=r(247),C=r(5218),D=r(4051),w=r(579);const T=n.Ik().shape({brokerName:n.Yj().required("Broker Name is required"),id:n.Yj().required("ID is required"),startDate:n.p6().required("Start Date is required"),employee:n.Yj().required("Dealer is required"),nism:n.Yj().required("NISM is required"),idType:n.Yj().required("ID Type is required")}),R=["Id","Broker Name","Employee","Nism","IdType","Action"],B=()=>{const[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(""),[B,M]=(0,a.useState)([]),[P,F]=(0,a.useState)([]),[O,L]=(0,a.useState)(!1),[q,E]=(0,a.useState)(!1),[V,W]=(0,a.useState)([]),[G,U]=(0,a.useState)(null),[Y,z]=(0,a.useState)(!1),[X]=(0,a.useState)(["Manual-ODIN","Manual-GREEK","Manual-XTS","Convex","XTS-API"]),H=async()=>{try{z(!0);const e=await g.A.get("/getIds");if(200===e.status){const t=e.data.data.map((e=>{var t,r,a,o;return{Id:null===(t=e.idNumber)||void 0===t?void 0:t.toUpperCase(),"Broker Name":e.brokerName.toUpperCase(),"Record Id":e.recordId,Employee:(null===e||void 0===e||null===(r=e.employeeId)||void 0===r?void 0:r.toUpperCase())||"-",Nism:null===(a=e.nism)||void 0===a?void 0:a.toUpperCase(),IdType:null===(o=e.idType)||void 0===o?void 0:o.toUpperCase(),Action:(0,w.jsxs)(N.A,{children:[(0,w.jsx)(S.b,{children:(0,w.jsx)(s.A,{children:(0,w.jsx)(k.txp,{})})}),(0,w.jsxs)(C.y,{"aria-label":"Action event example",onAction:t=>{"release"===t?J(e):"edit"===t?Z(e):"delete"===t&&$(e)},children:[(0,w.jsx)(D.Y,{isDisabled:3===e.status,children:"Release"},"release"),(0,w.jsx)(D.Y,{isDisabled:3===e.status,children:"Edit"},"edit"),(0,w.jsx)(D.Y,{children:"Delete"},"delete")]})]})}}));M(t),F(t),z(!1)}}catch(e){z(!1),console.error(e)}},K=()=>L(!0),Q=()=>{L(!1),E(!1),U(null)},Z=e=>{U(e),E(!0),K()},J=async e=>{try{await g.A.put("/releaseId/".concat(e.recordId,"/3")),f.oR.success("Released Id: ".concat(e.recordId)),H()}catch(t){f.oR.error("Error releasing broker.")}},$=async e=>{try{console.warn(e),await g.A.put("/changeStatus/".concat(e.recordId)),f.oR.success("ID deleted successfully."),H()}catch(t){f.oR.error("Error deleting ID.")}};(0,a.useEffect)((()=>{(async()=>{try{const e=await g.A.get("/users");200===e.status&&W(e.data)}catch(e){console.error(e)}})(),H(),(async()=>{try{const r=await g.A.get("/getAllBroker");var e;200===r.status&&t(null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.data.filter((e=>1===e.status)))}catch(r){console.error(r)}})()}),[]);const _={brokerName:(null===G||void 0===G?void 0:G.brokerId)||"",id:(null===G||void 0===G?void 0:G.idNumber)||"",startDate:(null===G||void 0===G?void 0:G.startDate)||"",employee:(null===G||void 0===G?void 0:G.employeeId)||"",nism:(null===G||void 0===G?void 0:G.nism)||"",idType:(null===G||void 0===G?void 0:G.idType)||""};return(0,w.jsxs)(x.A,{pageTitle:"ID Management",pageSubtitle:"Manage ID details",children:[(0,w.jsxs)(j.Z,{style:{marginTop:"1rem"},children:[(0,w.jsxs)("div",{className:"flex justify-between p-4 align-middle",children:[(0,w.jsxs)("div",{className:"flex gap-3",children:[(0,w.jsx)(i.A,{className:"searchUser",placeholder:"Search",InputProps:{startAdornment:(0,w.jsx)(l.A,{position:"start",children:(0,w.jsx)(I.zfp,{})})}}),(0,w.jsx)(c.A,{style:{minWidth:200,marginRight:"1rem"},children:(0,w.jsxs)(d.A,{value:r,onChange:e=>{const t=e.target.value;if(n(t),t){const e=B.filter((e=>e["Broker Name"]===t));F(e)}else F(B)},displayEmpty:!0,children:[(0,w.jsx)(p.A,{value:"",children:"All Brokers"}),e.map(((e,t)=>(0,w.jsx)(p.A,{value:e.brokerName,children:e.brokerName},t)))]})})]}),(0,w.jsx)(u.A,{onClick:K,variant:"contained",color:"primary",startIcon:(0,w.jsx)(I.QwN,{}),children:"Add ID"})]}),(0,w.jsx)(m.A,{mt:3,children:(0,w.jsx)(b.A,{title:R,tableData:P,loading:Y})})]}),(0,w.jsx)(h.A,{open:O,onClose:Q,children:(0,w.jsxs)(m.A,{className:"modal-box",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2,overflowY:"scroll"},children:[(0,w.jsx)(v.A,{variant:"h6",children:q?"Edit ID":"Add New ID"}),(0,w.jsx)(o.l1,{initialValues:_,validationSchema:T,onSubmit:async(e,t)=>{let{resetForm:r}=t;try{q?(await g.A.put("/updateId/".concat(G.recordId),e),f.oR.success("ID updated successfully.")):(await g.A.post("/createId",e),f.oR.success("ID added successfully.")),H(),r(),Q()}catch(i){var a,o,n,s;console.error(null===i||void 0===i||null===(a=i.response)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.detail),f.oR.error(null===i||void 0===i||null===(n=i.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.detail)}},children:t=>{let{values:r,handleChange:a,errors:n,touched:s,handleBlur:l}=t;return(0,w.jsxs)(o.lV,{children:[(0,w.jsxs)("div",{className:"flex gap-2",children:[(0,w.jsx)(i.A,{fullWidth:!0,margin:"normal",name:"id",label:"ID",value:r.id||"",onChange:a,onBlur:l,error:s.id&&Boolean(n.id),helperText:s.id&&n.id,inputProps:{style:{textTransform:"uppercase"}}}),(0,w.jsxs)(c.A,{fullWidth:!0,margin:"normal",error:s.brokerName&&Boolean(n.brokerName),children:[(0,w.jsx)(y.A,{id:"brokerName-label",children:"Broker Name"}),(0,w.jsx)(d.A,{labelId:"brokerName-label",id:"brokerName",name:"brokerName",label:"Broker Name",value:r.brokerName||"",onChange:a,onBlur:l,inputProps:{style:{textTransform:"uppercase"}},children:e.map(((e,t)=>(0,w.jsx)(p.A,{value:e.id,children:e.brokerName},t)))}),s.brokerName&&Boolean(n.brokerName)&&(0,w.jsx)(A.A,{children:n.brokerName})]})]}),(0,w.jsxs)("div",{className:"flex gap-2",children:[(0,w.jsx)(i.A,{fullWidth:!0,margin:"normal",name:"startDate",label:"Start Date",type:"date",InputLabelProps:{shrink:!0},value:r.startDate||"",onChange:a,onBlur:l,error:s.startDate&&Boolean(n.startDate),helperText:s.startDate&&n.startDate}),(0,w.jsxs)(c.A,{fullWidth:!0,margin:"normal",error:s.employee&&Boolean(n.employee),children:[(0,w.jsx)(y.A,{id:"employee-label",children:"Dealer"}),(0,w.jsx)(d.A,{labelId:"employee-label",id:"employee",name:"employee",label:"Dealer",value:r.employee||"",onChange:a,onBlur:l,children:V.map(((e,t)=>(0,w.jsx)(p.A,{value:e.id,children:e.firstName+" "+e.lastName},t)))}),s.employee&&n.employee&&(0,w.jsx)(A.A,{children:n.employee})]})]}),(0,w.jsxs)("div",{className:"flex gap-2",children:[(0,w.jsx)(i.A,{fullWidth:!0,margin:"normal",name:"nism",label:"NISM",value:r.nism||"",onChange:a,onBlur:l,error:s.nism&&Boolean(n.nism),helperText:s.nism&&n.nism,inputProps:{style:{textTransform:"uppercase"}}}),(0,w.jsxs)(c.A,{fullWidth:!0,margin:"normal",error:s.idType&&Boolean(n.idType),children:[(0,w.jsx)(y.A,{id:"IDType",children:"ID Type"}),(0,w.jsx)(d.A,{labelId:"IDType",id:"IDType",name:"idType",label:"ID Type",value:r.idType||"",onChange:a,onBlur:l,children:void 0!==X&&(null===X||void 0===X?void 0:X.map(((e,t)=>(0,w.jsx)(p.A,{value:e,children:e},t))))}),s.idType&&Boolean(n.idType)&&(0,w.jsx)(A.A,{children:n.idType})]})]}),(0,w.jsxs)("div",{className:"flex justify-end gap-4 mt-6",children:[(0,w.jsx)(u.A,{variant:"contained",color:"error",onClick:Q,children:"Cancel"}),(0,w.jsx)(u.A,{variant:"contained",color:"primary",type:"submit",children:q?"Update":"Add"})]})]})}})]})})]})}},4157:(e,t,r)=>{r.d(t,{A:()=>P});var a=r(5043),o=r(1596),n=r(9650),s=r(1806),i=r(4882),l=r(8076),c=r(39),d=r(9379),p=r(45),u=r(8610),m=r(8387),h=r(408),v=r(9662),y=r(579);const A=(0,v.A)((0,y.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");var b=r(2108),x=r(6262),g=r(8206),f=r(6803),j=r(2532),I=r(2372);function k(e){return(0,I.Ay)("MuiTableSortLabel",e)}const N=(0,j.A)("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc","directionDesc","directionAsc"]);var S=r(4162);const C=["active","children","className","direction","hideSortIcon","IconComponent","slots","slotProps"],D=(0,b.Ay)(h.A,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.active&&t.active]}})((0,x.A)((e=>{let{theme:t}=e;return{cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(t.vars||t).palette.text.secondary},"&:hover":{color:(t.vars||t).palette.text.secondary,["& .".concat(N.icon)]:{opacity:.5}},["&.".concat(N.active)]:{color:(t.vars||t).palette.text.primary,["& .".concat(N.icon)]:{opacity:1,color:(t.vars||t).palette.text.secondary}}}}))),w=(0,b.Ay)("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,t["iconDirection".concat((0,f.A)(r.direction))]]}})((0,x.A)((e=>{let{theme:t}=e;return{fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter}),userSelect:"none",variants:[{props:{direction:"desc"},style:{transform:"rotate(0deg)"}},{props:{direction:"asc"},style:{transform:"rotate(180deg)"}}]}}))),T=a.forwardRef((function(e,t){const r=(0,g.b)({props:e,name:"MuiTableSortLabel"}),{active:a=!1,children:o,className:n,direction:s="asc",hideSortIcon:i=!1,IconComponent:l=A,slots:c={},slotProps:h={}}=r,v=(0,p.A)(r,C),b=(0,d.A)((0,d.A)({},r),{},{active:a,direction:s,hideSortIcon:i,IconComponent:l}),x=(e=>{const{classes:t,direction:r,active:a}=e,o={root:["root",a&&"active","direction".concat((0,f.A)(r))],icon:["icon","iconDirection".concat((0,f.A)(r))]};return(0,u.A)(o,k,t)})(b),j={slots:c,slotProps:h},[I,N]=(0,S.A)("root",{elementType:D,externalForwardedProps:j,ownerState:b,className:(0,m.A)(x.root,n),ref:t}),[T,R]=(0,S.A)("icon",{elementType:w,externalForwardedProps:j,ownerState:b,className:x.icon});return(0,y.jsxs)(I,(0,d.A)((0,d.A)((0,d.A)({disableRipple:!0,component:"span"},N),v),{},{children:[o,i&&!a?null:(0,y.jsx)(T,(0,d.A)({as:l},R))]}))}));var R=r(3460),B=r(1637),M=r(728);const P=e=>{let{title:t=[],columnWidths:r=[],tableData:d=[],renderAction:p,loading:u,headerTotal:m,onRowClick:h}=e;const[v,A]=(0,a.useState)({key:"",direction:"asc"}),b=["status","id","brokerId","fundAllocated","Record Id","Gross Fund Interest","Gross Fund Sharing","Arbitrage Fund Interest","Arbitrage Fund Sharing","Prop Fund Interest","Prop Fund Sharing","Cost Per Cr","b2pFundsharing","b2pFundInterest","clientFundSharing","clientFundInterest"],x=(0,a.useMemo)((()=>v.key?[...d].sort(((e,t)=>{var r,a;const o=null!==(r=e[v.key])&&void 0!==r?r:"",n=null!==(a=t[v.key])&&void 0!==a?a:"";return"number"===typeof o&&"number"===typeof n?"asc"===v.direction?o-n:n-o:"asc"===v.direction?String(o).localeCompare(String(n)):String(n).localeCompare(String(o))})):d),[d,v]);return(0,y.jsx)(o.A,{className:"custom",children:(0,y.jsx)(n.A,{className:"tble-container",children:(0,y.jsxs)(s.A,{className:"tble-custom",stickyHeader:!0,children:[(0,y.jsx)(i.A,{children:(0,y.jsx)(l.A,{className:"tble-head",children:t.filter((e=>!b.includes(e))).map(((e,t)=>(0,y.jsx)(c.A,{align:"center",sx:{width:r[t]||"auto",minWidth:r[t]||150,maxWidth:r[t]||300,position:"sticky",top:0,backgroundColor:"white",zIndex:2},children:(0,y.jsx)(T,{active:v.key===e,direction:v.key===e?v.direction:"asc",onClick:()=>{return t=e,void A((e=>{const r=e.key===t&&"asc"===e.direction;return{key:t,direction:r?"desc":"asc"}}));var t},children:(0,y.jsxs)("div",{className:"flex flex-col",children:[(0,y.jsx)("div",{className:"headertext",children:null===e||void 0===e?void 0:e.toUpperCase()}),(0,y.jsx)("div",{className:"total-div",children:m&&(null===m||void 0===m?void 0:m.length)>0&&Object.keys(m[0]).includes(e)?m[0][e]:null})]})})},t)))})}),(0,y.jsxs)(R.A,{className:"tble-body",children:[u&&(0,y.jsx)(l.A,{children:(0,y.jsx)(c.A,{colSpan:t.length,className:"middle-noData",children:(0,y.jsx)(B.A,{})})}),x.map(((e,t)=>(0,y.jsx)(l.A,{onClick:()=>h&&h(e),sx:{cursor:h?"pointer":"default","&:hover":h?{backgroundColor:"#f0f0f0"}:{}},children:Object.keys(e).filter((e=>!b.includes(e))).map(((a,o)=>(0,y.jsx)(c.A,{align:"center",sx:{width:r[o]||"auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"action"===a&&p?(0,y.jsx)(M.T,{isDisabled:3===e.status,onPress:t=>{t.stopPropagation(),p(e.id)},children:1===e.status?"Release":"Released"}):e[a]},"".concat(t,"-").concat(o))))},t))),!u&&0===x.length&&(0,y.jsx)(l.A,{children:(0,y.jsx)(c.A,{colSpan:t.length,className:"middle-noData",align:"center",children:"No data found."})})]})]})})})}},4957:(e,t,r)=>{r.d(t,{A:()=>o});const a=r(9722).A.create({baseURL:"http://43.204.150.47:8000",timeout:5e3});a.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e)),(e=>(console.error("Request Interceptor Error:",e),Promise.reject(e)))),a.interceptors.response.use((e=>(console.log("Response Interceptor: Response received"),e)),(e=>(e.response&&401===e.response.status?(window.location.href="/",console.error("Response Interceptor: Unauthorized access - Redirecting to login")):console.error("Response Interceptor Error:",e.message),Promise.reject(e))));const o=a},8988:(e,t,r)=>{r.d(t,{A:()=>C});var a=r(45),o=r(9379),n=r(5043),s=r(8387),i=r(8610),l=r(1546),c=r(1475),d=r(2108),p=r(6262),u=r(8206),m=r(1347),h=r(408),v=r(5013),y=r(5849),A=r(2532);const b=(0,A.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const x=(0,A.A)("MuiListItemIcon",["root","alignItemsFlexStart"]);const g=(0,A.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);var f=r(2372);function j(e){return(0,f.Ay)("MuiMenuItem",e)}const I=(0,A.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var k=r(579);const N=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],S=(0,d.Ay)(h.A,{shouldForwardProp:e=>(0,c.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.divider&&t.divider,!r.disableGutters&&t.gutters]}})((0,p.A)((e=>{let{theme:t}=e;return(0,o.A)((0,o.A)({},t.typography.body1),{},{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(I.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,l.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(I.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,l.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(I.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,l.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,l.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(I.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(I.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(b.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(b.inset)]:{marginLeft:52},["& .".concat(g.root)]:{marginTop:0,marginBottom:0},["& .".concat(g.inset)]:{paddingLeft:36},["& .".concat(x.root)]:{minWidth:36},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return!t.dense},style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:t}=e;return t.dense},style:(0,o.A)((0,o.A)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2),{},{["& .".concat(x.root," svg")]:{fontSize:"1.25rem"}})}]})}))),C=n.forwardRef((function(e,t){const r=(0,u.b)({props:e,name:"MuiMenuItem"}),{autoFocus:l=!1,component:c="li",dense:d=!1,divider:p=!1,disableGutters:h=!1,focusVisibleClassName:A,role:b="menuitem",tabIndex:x,className:g}=r,f=(0,a.A)(r,N),I=n.useContext(m.A),C=n.useMemo((()=>({dense:d||I.dense||!1,disableGutters:h})),[I.dense,d,h]),D=n.useRef(null);(0,v.A)((()=>{l&&D.current&&D.current.focus()}),[l]);const w=(0,o.A)((0,o.A)({},r),{},{dense:C.dense,divider:p,disableGutters:h}),T=(e=>{const{disabled:t,dense:r,divider:a,disableGutters:n,selected:s,classes:l}=e,c={root:["root",r&&"dense",t&&"disabled",!n&&"gutters",a&&"divider",s&&"selected"]},d=(0,i.A)(c,j,l);return(0,o.A)((0,o.A)({},l),d)})(r),R=(0,y.A)(D,t);let B;return r.disabled||(B=void 0!==x?x:-1),(0,k.jsx)(m.A.Provider,{value:C,children:(0,k.jsx)(S,(0,o.A)((0,o.A)({ref:R,role:b,tabIndex:B,component:c,focusVisibleClassName:(0,s.A)(T.focusVisible,A),className:(0,s.A)(T.root,g)},f),{},{ownerState:w,classes:T}))})}))}}]);
//# sourceMappingURL=295.5f375afe.chunk.js.map