"use strict";(self.webpackChunkbcusermanagement=self.webpackChunkbcusermanagement||[]).push([[675],{4675:(e,t,r)=>{r.r(t),r.d(t,{default:()=>I});var s=r(5043),n=r(8330),a=r(94),o=r(4157),i=r(5394),c=r(7392),l=r(7784),d=r(1787),u=r(1906),p=r(4449),h=r(7353),m=r(5865),g=r(7561),x=r(3892),y=r(899),A=r(4957),j=r(5732),v=r(247),b=r(5218),S=r(4051),f=r(5051),N=r(7488),w=r(579);const k=y.Ik().shape({strategyName:y.Yj().required("Strategy Name is required")}),I=()=>{const[e,t]=(0,s.useState)(!1),[r,y]=(0,s.useState)([]),[I,C]=(0,s.useState)(!1),[R,D]=(0,s.useState)(null),F=()=>{t(!1),C(!1),D(null)},P=async()=>{try{const e=await A.A.get("/getStrategies");if(console.log(e),200===e.status){const t=e.data.map((e=>{var t;return{"Strategy Id":e.id,"Strategy Name":null===(t=e.StrategyName)||void 0===t?void 0:t.toUpperCase(),Action:(0,w.jsxs)(j.A,{children:[(0,w.jsx)(v.b,{children:(0,w.jsx)(c.A,{children:(0,w.jsx)(f.txp,{})})}),(0,w.jsxs)(b.y,{"aria-label":"Action event example",onAction:t=>{"Delete"===t?T(e.id):"Edit"===t&&E(e)},children:[(0,w.jsx)(S.Y,{children:"Delete"},"Delete"),(0,w.jsx)(S.Y,{children:"Edit"},"Edit")]})]})}}));y(t)}}catch(e){console.error("Error fetching strategies:",e)}};(0,s.useEffect)((()=>{P()}),[]);const T=async e=>{try{204===(await A.A.delete("/strategies/".concat(e))).status&&P()}catch(t){console.error("Error deleting strategy:",t)}},E=e=>{C(!0),D(e),t(!0)};return(0,w.jsxs)(n.A,{pageTitle:"Strategy",pageSubtitle:"Manage strategy",children:[(0,w.jsxs)(a.Z,{className:"mt-3 p-3",children:[(0,w.jsxs)("div",{className:"flex mb-2 justify-between",children:[(0,w.jsx)(l.A,{className:"searchUser",placeholder:"Search",InputProps:{startAdornment:(0,w.jsx)(d.A,{position:"start",children:(0,w.jsx)(i.zfp,{})})}}),(0,w.jsx)(u.A,{variant:"contained",startIcon:(0,w.jsx)(i.QwN,{}),onClick:()=>{C(!1),D(null),t(!0)},children:"Add Strategy"})]}),(0,w.jsx)(o.A,{title:["Strategy Id","Strategy Name","Action"],tableData:r})]}),(0,w.jsx)(p.A,{open:e,onClose:F,children:(0,w.jsxs)(h.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,borderRadius:"1rem",p:4},children:[(0,w.jsx)(m.A,{variant:"h6",component:"h2",mb:2,children:I?"Edit Strategy":"Add Strategy"}),(0,w.jsx)(x.l1,{initialValues:{strategyName:I&&R?R.strategyName:""},enableReinitialize:!0,validationSchema:k,onSubmit:async(e,t)=>{let{resetForm:r}=t;try{if(I&&R){200===(await A.A.put("/strategies/".concat(R.id),{strategyName:e.strategyName})).status&&(N.oR.success("Strategy updated successfully"),P())}else{201===(await A.A.post("/strategies",{strategyName:e.strategyName})).status&&(N.oR.success("Strategy created successfully"),P())}}catch(s){console.error("Error saving strategy:",s)}r(),F()},children:e=>{let{errors:t,touched:r}=e;return(0,w.jsxs)(x.lV,{children:[console.log(R),(0,w.jsx)(g.A,{fullWidth:!0,margin:"normal",children:(0,w.jsx)(x.D0,{as:l.A,name:"strategyName",label:"Strategy Name",error:r.strategyName&&Boolean(t.strategyName),helperText:r.strategyName&&t.strategyName})}),(0,w.jsxs)(h.A,{mt:2,display:"flex",justifyContent:"flex-end",children:[(0,w.jsx)(u.A,{variant:"contained",color:"secondary",onClick:F,children:"Cancel"}),(0,w.jsx)(h.A,{ml:2}),(0,w.jsx)(u.A,{variant:"contained",type:"submit",children:I?"Update":"Submit"})]})]})}})]})})]})}},4157:(e,t,r)=>{r.d(t,{A:()=>E});var s=r(5043),n=r(1596),a=r(9650),o=r(1806),i=r(4882),c=r(8076),l=r(39),d=r(9379),u=r(45),p=r(8610),h=r(8387),m=r(408),g=r(9662),x=r(579);const y=(0,g.A)((0,x.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");var A=r(2108),j=r(6262),v=r(8206),b=r(6803),S=r(2532),f=r(2372);function N(e){return(0,f.Ay)("MuiTableSortLabel",e)}const w=(0,S.A)("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc","directionDesc","directionAsc"]);var k=r(4162);const I=["active","children","className","direction","hideSortIcon","IconComponent","slots","slotProps"],C=(0,A.Ay)(m.A,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.active&&t.active]}})((0,j.A)((e=>{let{theme:t}=e;return{cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(t.vars||t).palette.text.secondary},"&:hover":{color:(t.vars||t).palette.text.secondary,["& .".concat(w.icon)]:{opacity:.5}},["&.".concat(w.active)]:{color:(t.vars||t).palette.text.primary,["& .".concat(w.icon)]:{opacity:1,color:(t.vars||t).palette.text.secondary}}}}))),R=(0,A.Ay)("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,t["iconDirection".concat((0,b.A)(r.direction))]]}})((0,j.A)((e=>{let{theme:t}=e;return{fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter}),userSelect:"none",variants:[{props:{direction:"desc"},style:{transform:"rotate(0deg)"}},{props:{direction:"asc"},style:{transform:"rotate(180deg)"}}]}}))),D=s.forwardRef((function(e,t){const r=(0,v.b)({props:e,name:"MuiTableSortLabel"}),{active:s=!1,children:n,className:a,direction:o="asc",hideSortIcon:i=!1,IconComponent:c=y,slots:l={},slotProps:m={}}=r,g=(0,u.A)(r,I),A=(0,d.A)((0,d.A)({},r),{},{active:s,direction:o,hideSortIcon:i,IconComponent:c}),j=(e=>{const{classes:t,direction:r,active:s}=e,n={root:["root",s&&"active","direction".concat((0,b.A)(r))],icon:["icon","iconDirection".concat((0,b.A)(r))]};return(0,p.A)(n,N,t)})(A),S={slots:l,slotProps:m},[f,w]=(0,k.A)("root",{elementType:C,externalForwardedProps:S,ownerState:A,className:(0,h.A)(j.root,a),ref:t}),[D,F]=(0,k.A)("icon",{elementType:R,externalForwardedProps:S,ownerState:A,className:j.icon});return(0,x.jsxs)(f,(0,d.A)((0,d.A)((0,d.A)({disableRipple:!0,component:"span"},w),g),{},{children:[n,i&&!s?null:(0,x.jsx)(D,(0,d.A)({as:c},F))]}))}));var F=r(3460),P=r(1637),T=r(728);const E=e=>{let{title:t=[],columnWidths:r=[],tableData:d=[],renderAction:u,loading:p,headerTotal:h,onRowClick:m}=e;const[g,y]=(0,s.useState)({key:"",direction:"asc"}),A=["status","id","brokerId","fundAllocated","Record Id","Gross Fund Interest","Gross Fund Sharing","Arbitrage Fund Interest","Arbitrage Fund Sharing","Prop Fund Interest","Prop Fund Sharing","Cost Per Cr","b2pFundsharing","b2pFundInterest","clientFundSharing","clientFundInterest"],j=(0,s.useMemo)((()=>g.key?[...d].sort(((e,t)=>{var r,s;const n=null!==(r=e[g.key])&&void 0!==r?r:"",a=null!==(s=t[g.key])&&void 0!==s?s:"";return"number"===typeof n&&"number"===typeof a?"asc"===g.direction?n-a:a-n:"asc"===g.direction?String(n).localeCompare(String(a)):String(a).localeCompare(String(n))})):d),[d,g]);return(0,x.jsx)(n.A,{className:"custom",children:(0,x.jsx)(a.A,{className:"tble-container",children:(0,x.jsxs)(o.A,{className:"tble-custom",stickyHeader:!0,children:[(0,x.jsx)(i.A,{children:(0,x.jsx)(c.A,{className:"tble-head",children:t.filter((e=>!A.includes(e))).map(((e,t)=>(0,x.jsx)(l.A,{align:"center",sx:{width:r[t]||"auto",minWidth:r[t]||150,maxWidth:r[t]||300,position:"sticky",top:0,backgroundColor:"white",zIndex:2},children:(0,x.jsx)(D,{active:g.key===e,direction:g.key===e?g.direction:"asc",onClick:()=>{return t=e,void y((e=>{const r=e.key===t&&"asc"===e.direction;return{key:t,direction:r?"desc":"asc"}}));var t},children:(0,x.jsxs)("div",{className:"flex flex-col",children:[(0,x.jsx)("div",{className:"headertext",children:null===e||void 0===e?void 0:e.toUpperCase()}),(0,x.jsx)("div",{className:"total-div",children:h&&(null===h||void 0===h?void 0:h.length)>0&&Object.keys(h[0]).includes(e)?h[0][e]:null})]})})},t)))})}),(0,x.jsxs)(F.A,{className:"tble-body",children:[p&&(0,x.jsx)(c.A,{children:(0,x.jsx)(l.A,{colSpan:t.length,className:"middle-noData",children:(0,x.jsx)(P.A,{})})}),j.map(((e,t)=>(0,x.jsx)(c.A,{onClick:()=>m&&m(e),sx:{cursor:m?"pointer":"default","&:hover":m?{backgroundColor:"#f0f0f0"}:{}},children:Object.keys(e).filter((e=>!A.includes(e))).map(((s,n)=>(0,x.jsx)(l.A,{align:"center",sx:{width:r[n]||"auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"action"===s&&u?(0,x.jsx)(T.T,{isDisabled:3===e.status,onPress:t=>{t.stopPropagation(),u(e.id)},children:1===e.status?"Release":"Released"}):e[s]},"".concat(t,"-").concat(n))))},t))),!p&&0===j.length&&(0,x.jsx)(c.A,{children:(0,x.jsx)(l.A,{colSpan:t.length,className:"middle-noData",align:"center",children:"No data found."})})]})]})})})}},4957:(e,t,r)=>{r.d(t,{A:()=>n});const s=r(9722).A.create({baseURL:"http://43.204.150.47:8000",timeout:5e3});s.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e)),(e=>(console.error("Request Interceptor Error:",e),Promise.reject(e)))),s.interceptors.response.use((e=>(console.log("Response Interceptor: Response received"),e)),(e=>(e.response&&401===e.response.status?(window.location.href="/",console.error("Response Interceptor: Unauthorized access - Redirecting to login")):console.error("Response Interceptor Error:",e.message),Promise.reject(e))));const n=s}}]);
//# sourceMappingURL=675.a996ea18.chunk.js.map