"use strict";(self.webpackChunkbcusermanagement=self.webpackChunkbcusermanagement||[]).push([[295],{9295:(e,a,t)=>{t.r(a),t.d(a,{default:()=>M});var r=t(5043),o=t(3892),i=t(899),s=t(7392),l=t(7784),n=t(1787),d=t(7561),c=t(2268),p=t(8988),u=t(1906),m=t(7353),h=t(4449),v=t(5865),b=t(9190),y=t(4054),x=t(9989),g=t(9014),A=t(4957),j=t(7488),f=t(94),I=t(5394),N=t(5051),k=t(5732),D=t(247),C=t(5218),T=t(4051),S=t(579);const w=i.Ik().shape({brokerName:i.Yj().required("Broker Name is required"),id:i.Yj().required("ID is required"),startDate:i.p6().required("Start Date is required"),employee:i.Yj().required("Dealer is required"),nism:i.Yj().required("NISM is required"),idType:i.Yj().required("ID Type is required")}),B=["Id","Broker Name","Employee","Nism","IdType","Action"],M=()=>{const[e,a]=(0,r.useState)([]),[t,i]=(0,r.useState)(""),[M,R]=(0,r.useState)([]),[O,q]=(0,r.useState)([]),[V,E]=(0,r.useState)(!1),[W,G]=(0,r.useState)(!1),[Y,L]=(0,r.useState)([]),[P,X]=(0,r.useState)(null),[F,z]=(0,r.useState)(!1),[H]=(0,r.useState)(["Manual-ODIN","Manual-GREEK","Manual-XTS","Convex","XTS-API"]),U=async()=>{try{z(!0);const e=await A.A.get("/getIds");if(200===e.status){const a=e.data.data.map((e=>({Id:e.idNumber,"Broker Name":e.brokerName,"Record Id":e.recordId,Employee:(null===e||void 0===e?void 0:e.employeeId)||"-",Nism:e.nism,IdType:e.idType,Action:(0,S.jsxs)(k.A,{children:[(0,S.jsx)(D.b,{children:(0,S.jsx)(s.A,{children:(0,S.jsx)(N.txp,{})})}),(0,S.jsxs)(C.y,{"aria-label":"Action event example",onAction:a=>{"release"===a?J(e):"edit"===a&&Z(e)},children:[(0,S.jsx)(T.Y,{isDisabled:3===e.status,children:"Release"},"release"),(0,S.jsx)(T.Y,{isDisabled:3===e.status,children:"Edit"},"edit")]})]})})));R(a),q(a),z(!1)}}catch(e){z(!1),console.error(e)}},K=()=>E(!0),Q=()=>{E(!1),G(!1),X(null)},Z=e=>{X(e),G(!0),K()},J=async e=>{try{await A.A.put("/releaseId/".concat(e.recordId,"/3")),j.oR.success("Released Id: ".concat(e.recordId)),U()}catch(a){j.oR.error("Error releasing broker.")}};(0,r.useEffect)((()=>{(async()=>{try{const e=await A.A.get("/users");200===e.status&&L(e.data)}catch(e){console.error(e)}})(),U(),(async()=>{try{const t=await A.A.get("/getAllBroker");var e;200===t.status&&a(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data.filter((e=>1===e.status)))}catch(t){console.error(t),j.oR.error("Error fetching broker data.")}})()}),[]);const $={brokerName:(null===P||void 0===P?void 0:P.brokerId)||"",id:(null===P||void 0===P?void 0:P.idNumber)||"",startDate:(null===P||void 0===P?void 0:P.startDate)||"",employee:(null===P||void 0===P?void 0:P.employeeId)||"",nism:(null===P||void 0===P?void 0:P.nism)||"",idType:(null===P||void 0===P?void 0:P.idType)||""};return(0,S.jsxs)(g.A,{pageTitle:"ID Management",pageSubtitle:"Manage ID details",children:[(0,S.jsxs)(f.Z,{style:{marginTop:"1rem"},children:[(0,S.jsxs)("div",{className:"flex justify-between p-4 align-middle",children:[(0,S.jsxs)("div",{className:"flex gap-3",children:[(0,S.jsx)(l.A,{className:"searchUser",placeholder:"Search",InputProps:{startAdornment:(0,S.jsx)(n.A,{position:"start",children:(0,S.jsx)(I.zfp,{})})}}),(0,S.jsx)(d.A,{style:{minWidth:200,marginRight:"1rem"},children:(0,S.jsxs)(c.A,{value:t,onChange:e=>{const a=e.target.value;if(i(a),a){const e=M.filter((e=>e["Broker Name"]===a));q(e)}else q(M)},displayEmpty:!0,children:[(0,S.jsx)(p.A,{value:"",children:"All Brokers"}),e.map(((e,a)=>(0,S.jsx)(p.A,{value:e.brokerName,children:e.brokerName},a)))]})})]}),(0,S.jsx)(u.A,{onClick:K,variant:"contained",color:"primary",startIcon:(0,S.jsx)(I.QwN,{}),children:"Add ID"})]}),(0,S.jsx)(m.A,{mt:3,children:(0,S.jsx)(x.A,{title:B,tableData:O,loading:F})})]}),(0,S.jsx)(h.A,{open:V,onClose:Q,children:(0,S.jsxs)(m.A,{className:"modal-box",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2,overflowY:"scroll"},children:[(0,S.jsx)(v.A,{variant:"h6",children:W?"Edit ID":"Add New ID"}),(0,S.jsx)(o.l1,{initialValues:$,validationSchema:w,onSubmit:async(e,a)=>{let{resetForm:t}=a;try{W?(await A.A.put("/updateId/".concat(P.recordId),e),j.oR.success("ID updated successfully.")):(await A.A.post("/createId",e),j.oR.success("ID added successfully.")),U(),t(),Q()}catch(l){var r,o,i,s;console.error(null===l||void 0===l||null===(r=l.response)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.detail),j.oR.error(null===l||void 0===l||null===(i=l.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.detail)}},children:a=>{let{values:t,handleChange:r,errors:i,touched:s,handleBlur:n}=a;return(0,S.jsxs)(o.lV,{children:[(0,S.jsxs)("div",{className:"flex gap-2",children:[(0,S.jsx)(l.A,{fullWidth:!0,margin:"normal",name:"id",label:"ID",value:t.id||"",onChange:r,onBlur:n,error:s.id&&Boolean(i.id),helperText:s.id&&i.id,inputProps:{style:{textTransform:"uppercase"}}}),(0,S.jsxs)(d.A,{fullWidth:!0,margin:"normal",error:s.brokerName&&Boolean(i.brokerName),children:[(0,S.jsx)(b.A,{id:"brokerName-label",children:"Broker Name"}),(0,S.jsx)(c.A,{labelId:"brokerName-label",id:"brokerName",name:"brokerName",label:"Broker Name",value:t.brokerName||"",onChange:r,onBlur:n,children:e.map(((e,a)=>(0,S.jsx)(p.A,{value:e.id,children:e.brokerName},a)))}),s.brokerName&&Boolean(i.brokerName)&&(0,S.jsx)(y.A,{children:i.brokerName})]})]}),(0,S.jsxs)("div",{className:"flex gap-2",children:[(0,S.jsx)(l.A,{fullWidth:!0,margin:"normal",name:"startDate",label:"Start Date",type:"date",InputLabelProps:{shrink:!0},value:t.startDate||"",onChange:r,onBlur:n,error:s.startDate&&Boolean(i.startDate),helperText:s.startDate&&i.startDate}),(0,S.jsxs)(d.A,{fullWidth:!0,margin:"normal",error:s.employee&&Boolean(i.employee),children:[(0,S.jsx)(b.A,{id:"employee-label",children:"Dealer"}),(0,S.jsx)(c.A,{labelId:"employee-label",id:"employee",name:"employee",label:"Dealer",value:t.employee||"",onChange:r,onBlur:n,children:Y.map(((e,a)=>(0,S.jsx)(p.A,{value:e.id,children:e.firstName+" "+e.lastName},a)))}),s.employee&&i.employee&&(0,S.jsx)(y.A,{children:i.employee})]})]}),(0,S.jsxs)("div",{className:"flex gap-2",children:[(0,S.jsx)(l.A,{fullWidth:!0,margin:"normal",name:"nism",label:"NISM",value:t.nism||"",onChange:r,onBlur:n,error:s.nism&&Boolean(i.nism),helperText:s.nism&&i.nism,inputProps:{style:{textTransform:"uppercase"}}}),(0,S.jsxs)(d.A,{fullWidth:!0,margin:"normal",error:s.idType&&Boolean(i.idType),children:[(0,S.jsx)(b.A,{id:"IDType",children:"ID Type"}),(0,S.jsx)(c.A,{labelId:"IDType",id:"IDType",name:"idType",label:"ID Type",value:t.idType||"",onChange:r,onBlur:n,children:void 0!==H&&(null===H||void 0===H?void 0:H.map(((e,a)=>(0,S.jsx)(p.A,{value:e,children:e},a))))}),s.idType&&Boolean(i.idType)&&(0,S.jsx)(y.A,{children:i.idType})]})]}),(0,S.jsxs)("div",{className:"flex justify-end gap-4 mt-6",children:[(0,S.jsx)(u.A,{variant:"contained",color:"error",onClick:Q,children:"Cancel"}),(0,S.jsx)(u.A,{variant:"contained",color:"primary",type:"submit",children:W?"Update":"Add"})]})]})}})]})})]})}},8988:(e,a,t)=>{t.d(a,{A:()=>C});var r=t(45),o=t(9379),i=t(5043),s=t(8387),l=t(8610),n=t(1546),d=t(1475),c=t(2108),p=t(6262),u=t(8206),m=t(1347),h=t(408),v=t(5013),b=t(5849),y=t(2532);const x=(0,y.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const g=(0,y.A)("MuiListItemIcon",["root","alignItemsFlexStart"]);const A=(0,y.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);var j=t(2372);function f(e){return(0,j.Ay)("MuiMenuItem",e)}const I=(0,y.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var N=t(579);const k=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],D=(0,c.Ay)(h.A,{shouldForwardProp:e=>(0,d.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:t}=e;return[a.root,t.dense&&a.dense,t.divider&&a.divider,!t.disableGutters&&a.gutters]}})((0,p.A)((e=>{let{theme:a}=e;return(0,o.A)((0,o.A)({},a.typography.body1),{},{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(a.vars||a).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(I.selected)]:{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / ").concat(a.vars.palette.action.selectedOpacity,")"):(0,n.X4)(a.palette.primary.main,a.palette.action.selectedOpacity),["&.".concat(I.focusVisible)]:{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / calc(").concat(a.vars.palette.action.selectedOpacity," + ").concat(a.vars.palette.action.focusOpacity,"))"):(0,n.X4)(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)}},["&.".concat(I.selected,":hover")]:{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / calc(").concat(a.vars.palette.action.selectedOpacity," + ").concat(a.vars.palette.action.hoverOpacity,"))"):(0,n.X4)(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / ").concat(a.vars.palette.action.selectedOpacity,")"):(0,n.X4)(a.palette.primary.main,a.palette.action.selectedOpacity)}},["&.".concat(I.focusVisible)]:{backgroundColor:(a.vars||a).palette.action.focus},["&.".concat(I.disabled)]:{opacity:(a.vars||a).palette.action.disabledOpacity},["& + .".concat(x.root)]:{marginTop:a.spacing(1),marginBottom:a.spacing(1)},["& + .".concat(x.inset)]:{marginLeft:52},["& .".concat(A.root)]:{marginTop:0,marginBottom:0},["& .".concat(A.inset)]:{paddingLeft:36},["& .".concat(g.root)]:{minWidth:36},variants:[{props:e=>{let{ownerState:a}=e;return!a.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:a}=e;return a.divider},style:{borderBottom:"1px solid ".concat((a.vars||a).palette.divider),backgroundClip:"padding-box"}},{props:e=>{let{ownerState:a}=e;return!a.dense},style:{[a.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:a}=e;return a.dense},style:(0,o.A)((0,o.A)({minHeight:32,paddingTop:4,paddingBottom:4},a.typography.body2),{},{["& .".concat(g.root," svg")]:{fontSize:"1.25rem"}})}]})}))),C=i.forwardRef((function(e,a){const t=(0,u.b)({props:e,name:"MuiMenuItem"}),{autoFocus:n=!1,component:d="li",dense:c=!1,divider:p=!1,disableGutters:h=!1,focusVisibleClassName:y,role:x="menuitem",tabIndex:g,className:A}=t,j=(0,r.A)(t,k),I=i.useContext(m.A),C=i.useMemo((()=>({dense:c||I.dense||!1,disableGutters:h})),[I.dense,c,h]),T=i.useRef(null);(0,v.A)((()=>{n&&T.current&&T.current.focus()}),[n]);const S=(0,o.A)((0,o.A)({},t),{},{dense:C.dense,divider:p,disableGutters:h}),w=(e=>{const{disabled:a,dense:t,divider:r,disableGutters:i,selected:s,classes:n}=e,d={root:["root",t&&"dense",a&&"disabled",!i&&"gutters",r&&"divider",s&&"selected"]},c=(0,l.A)(d,f,n);return(0,o.A)((0,o.A)({},n),c)})(t),B=(0,b.A)(T,a);let M;return t.disabled||(M=void 0!==g?g:-1),(0,N.jsx)(m.A.Provider,{value:C,children:(0,N.jsx)(D,(0,o.A)((0,o.A)({ref:B,role:x,tabIndex:M,component:d,focusVisibleClassName:(0,s.A)(w.focusVisible,y),className:(0,s.A)(w.root,A)},j),{},{ownerState:S,classes:w}))})}))}}]);
//# sourceMappingURL=295.c99242a1.chunk.js.map