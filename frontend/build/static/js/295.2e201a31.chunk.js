"use strict";(self.webpackChunkbcusermanagement=self.webpackChunkbcusermanagement||[]).push([[295],{9295:(e,t,r)=>{r.r(t),r.d(t,{default:()=>B});var a=r(5043),o=r(3892),s=r(899),n=r(7392),i=r(7784),l=r(1787),c=r(7561),d=r(2268),p=r(8988),u=r(1906),m=r(7353),h=r(4449),v=r(5865),y=r(9190),A=r(4054),x=r(3934),b=r(8330),g=r(4957),j=r(7488),f=r(94),I=r(5394),k=r(5051),N=r(5732),w=r(247),S=r(5218),C=r(4051),D=r(579);const T=s.Ik().shape({brokerName:s.Yj().required("Broker Name is required"),id:s.Yj().required("ID is required"),startDate:s.p6().required("Start Date is required"),employee:s.Yj().required("Dealer is required"),nism:s.Yj().required("NISM is required"),idType:s.Yj().required("ID Type is required")}),R=["Id","Broker Name","Employee","Nism","IdType","Action"],B=()=>{const[e,t]=(0,a.useState)([]),[r,s]=(0,a.useState)(""),[B,M]=(0,a.useState)([]),[F,L]=(0,a.useState)([]),[O,P]=(0,a.useState)(!1),[W,q]=(0,a.useState)(!1),[E,U]=(0,a.useState)([]),[V,G]=(0,a.useState)(null),[z,Y]=(0,a.useState)(!1),[X]=(0,a.useState)(["Manual-ODIN","Manual-GREEK","Manual-XTS","Convex","XTS-API"]),H=async()=>{try{Y(!0);const e=await g.A.get("/getIds");if(200===e.status){const t=e.data.data.map((e=>{var t,r,a,o;return{Id:null===(t=e.idNumber)||void 0===t?void 0:t.toUpperCase(),"Broker Name":e.brokerName.toUpperCase(),"Record Id":e.recordId,Employee:(null===e||void 0===e||null===(r=e.employeeId)||void 0===r?void 0:r.toUpperCase())||"-",Nism:null===(a=e.nism)||void 0===a?void 0:a.toUpperCase(),IdType:null===(o=e.idType)||void 0===o?void 0:o.toUpperCase(),Action:(0,D.jsxs)(N.A,{children:[(0,D.jsx)(w.b,{children:(0,D.jsx)(n.A,{children:(0,D.jsx)(k.txp,{})})}),(0,D.jsxs)(S.y,{"aria-label":"Action event example",onAction:t=>{"release"===t?J(e):"edit"===t?Z(e):"delete"===t&&$(e)},children:[(0,D.jsx)(C.Y,{isDisabled:3===e.status,children:"Release"},"release"),(0,D.jsx)(C.Y,{isDisabled:3===e.status,children:"Edit"},"edit"),(0,D.jsx)(C.Y,{children:"Delete"},"delete")]})]})}}));M(t),L(t),Y(!1)}}catch(e){Y(!1),console.error(e)}},K=()=>P(!0),Q=()=>{P(!1),q(!1),G(null)},Z=e=>{G(e),q(!0),K()},J=async e=>{try{await g.A.put("/releaseId/".concat(e.recordId,"/3")),j.oR.success("Released Id: ".concat(e.recordId)),H()}catch(t){j.oR.error("Error releasing broker.")}},$=async e=>{try{console.warn(e),await g.A.put("/changeStatus/".concat(e.recordId)),j.oR.success("ID deleted successfully."),H()}catch(t){j.oR.error("Error deleting ID.")}};(0,a.useEffect)((()=>{(async()=>{try{const e=await g.A.get("/users");200===e.status&&U(e.data)}catch(e){console.error(e)}})(),H(),(async()=>{try{const r=await g.A.get("/getAllBroker");var e;200===r.status&&t(null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.data.filter((e=>1===e.status)))}catch(r){console.error(r),j.oR.error("Error fetching broker data.")}})()}),[]);const _={brokerName:(null===V||void 0===V?void 0:V.brokerId)||"",id:(null===V||void 0===V?void 0:V.idNumber)||"",startDate:(null===V||void 0===V?void 0:V.startDate)||"",employee:(null===V||void 0===V?void 0:V.employeeId)||"",nism:(null===V||void 0===V?void 0:V.nism)||"",idType:(null===V||void 0===V?void 0:V.idType)||""};return(0,D.jsxs)(b.A,{pageTitle:"ID Management",pageSubtitle:"Manage ID details",children:[(0,D.jsxs)(f.Z,{style:{marginTop:"1rem"},children:[(0,D.jsxs)("div",{className:"flex justify-between p-4 align-middle",children:[(0,D.jsxs)("div",{className:"flex gap-3",children:[(0,D.jsx)(i.A,{className:"searchUser",placeholder:"Search",InputProps:{startAdornment:(0,D.jsx)(l.A,{position:"start",children:(0,D.jsx)(I.zfp,{})})}}),(0,D.jsx)(c.A,{style:{minWidth:200,marginRight:"1rem"},children:(0,D.jsxs)(d.A,{value:r,onChange:e=>{const t=e.target.value;if(s(t),t){const e=B.filter((e=>e["Broker Name"]===t));L(e)}else L(B)},displayEmpty:!0,children:[(0,D.jsx)(p.A,{value:"",children:"All Brokers"}),e.map(((e,t)=>(0,D.jsx)(p.A,{value:e.brokerName,children:e.brokerName},t)))]})})]}),(0,D.jsx)(u.A,{onClick:K,variant:"contained",color:"primary",startIcon:(0,D.jsx)(I.QwN,{}),children:"Add ID"})]}),(0,D.jsx)(m.A,{mt:3,children:(0,D.jsx)(x.A,{title:R,tableData:F,loading:z})})]}),(0,D.jsx)(h.A,{open:O,onClose:Q,children:(0,D.jsxs)(m.A,{className:"modal-box",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2,overflowY:"scroll"},children:[(0,D.jsx)(v.A,{variant:"h6",children:W?"Edit ID":"Add New ID"}),(0,D.jsx)(o.l1,{initialValues:_,validationSchema:T,onSubmit:async(e,t)=>{let{resetForm:r}=t;try{W?(await g.A.put("/updateId/".concat(V.recordId),e),j.oR.success("ID updated successfully.")):(await g.A.post("/createId",e),j.oR.success("ID added successfully.")),H(),r(),Q()}catch(i){var a,o,s,n;console.error(null===i||void 0===i||null===(a=i.response)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.detail),j.oR.error(null===i||void 0===i||null===(s=i.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.detail)}},children:t=>{let{values:r,handleChange:a,errors:s,touched:n,handleBlur:l}=t;return(0,D.jsxs)(o.lV,{children:[(0,D.jsxs)("div",{className:"flex gap-2",children:[(0,D.jsx)(i.A,{fullWidth:!0,margin:"normal",name:"id",label:"ID",value:r.id||"",onChange:a,onBlur:l,error:n.id&&Boolean(s.id),helperText:n.id&&s.id,inputProps:{style:{textTransform:"uppercase"}}}),(0,D.jsxs)(c.A,{fullWidth:!0,margin:"normal",error:n.brokerName&&Boolean(s.brokerName),children:[(0,D.jsx)(y.A,{id:"brokerName-label",children:"Broker Name"}),(0,D.jsx)(d.A,{labelId:"brokerName-label",id:"brokerName",name:"brokerName",label:"Broker Name",value:r.brokerName||"",onChange:a,onBlur:l,inputProps:{style:{textTransform:"uppercase"}},children:e.map(((e,t)=>(0,D.jsx)(p.A,{value:e.id,children:e.brokerName},t)))}),n.brokerName&&Boolean(s.brokerName)&&(0,D.jsx)(A.A,{children:s.brokerName})]})]}),(0,D.jsxs)("div",{className:"flex gap-2",children:[(0,D.jsx)(i.A,{fullWidth:!0,margin:"normal",name:"startDate",label:"Start Date",type:"date",InputLabelProps:{shrink:!0},value:r.startDate||"",onChange:a,onBlur:l,error:n.startDate&&Boolean(s.startDate),helperText:n.startDate&&s.startDate}),(0,D.jsxs)(c.A,{fullWidth:!0,margin:"normal",error:n.employee&&Boolean(s.employee),children:[(0,D.jsx)(y.A,{id:"employee-label",children:"Dealer"}),(0,D.jsx)(d.A,{labelId:"employee-label",id:"employee",name:"employee",label:"Dealer",value:r.employee||"",onChange:a,onBlur:l,children:E.map(((e,t)=>(0,D.jsx)(p.A,{value:e.id,children:e.firstName+" "+e.lastName},t)))}),n.employee&&s.employee&&(0,D.jsx)(A.A,{children:s.employee})]})]}),(0,D.jsxs)("div",{className:"flex gap-2",children:[(0,D.jsx)(i.A,{fullWidth:!0,margin:"normal",name:"nism",label:"NISM",value:r.nism||"",onChange:a,onBlur:l,error:n.nism&&Boolean(s.nism),helperText:n.nism&&s.nism,inputProps:{style:{textTransform:"uppercase"}}}),(0,D.jsxs)(c.A,{fullWidth:!0,margin:"normal",error:n.idType&&Boolean(s.idType),children:[(0,D.jsx)(y.A,{id:"IDType",children:"ID Type"}),(0,D.jsx)(d.A,{labelId:"IDType",id:"IDType",name:"idType",label:"ID Type",value:r.idType||"",onChange:a,onBlur:l,children:void 0!==X&&(null===X||void 0===X?void 0:X.map(((e,t)=>(0,D.jsx)(p.A,{value:e,children:e},t))))}),n.idType&&Boolean(s.idType)&&(0,D.jsx)(A.A,{children:s.idType})]})]}),(0,D.jsxs)("div",{className:"flex justify-end gap-4 mt-6",children:[(0,D.jsx)(u.A,{variant:"contained",color:"error",onClick:Q,children:"Cancel"}),(0,D.jsx)(u.A,{variant:"contained",color:"primary",type:"submit",children:W?"Update":"Add"})]})]})}})]})})]})}},3934:(e,t,r)=>{r.d(t,{A:()=>v});var a=r(5043),o=r(1596),s=r(9650),n=r(1806),i=r(4882),l=r(8076),c=r(39),d=r(8093),p=r(3460),u=r(1637),m=r(728),h=r(579);const v=e=>{let{title:t=[],columnWidths:r=[],tableData:v=[],renderAction:y,loading:A}=e;const[x,b]=(0,a.useState)(0),[g,j]=(0,a.useState)(5),[f,I]=(0,a.useState)({key:"",direction:"asc"}),k=e=>{I((t=>{const r=t.key===e&&"asc"===t.direction;return{key:e,direction:r?"desc":"asc"}}))},N=a.useMemo((()=>f.key?[...v].sort(((e,t)=>e[f.key]<t[f.key]?"asc"===f.direction?-1:1:e[f.key]>t[f.key]?"asc"===f.direction?1:-1:0)):v),[v,f]);return(0,h.jsx)(o.A,{className:"custom",children:(0,h.jsx)(s.A,{className:"tble-container",children:(0,h.jsxs)(n.A,{className:"tble-custom",stickyHeader:!0,children:[(0,h.jsx)(i.A,{children:(0,h.jsx)(l.A,{className:"tble-head",children:t.map(((e,t)=>"Gross Fund"===e?(0,h.jsx)(c.A,{align:"center",sx:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:(0,h.jsx)(d.A,{active:"grossFund"===f.key,direction:"grossFund"===f.key?f.direction:"asc",onClick:()=>k("grossFund"),children:"Gross Fund (Fund | Interest | Sharing)"})},"grossFund"):(0,h.jsx)(c.A,{align:"center",sx:{width:r[t]||"auto",minWidth:r[t]||150,maxWidth:r[t]||300,position:"sticky",top:0,backgroundColor:"white",zIndex:2},children:(0,h.jsx)(d.A,{active:f.key===e.toLowerCase(),direction:f.key===e.toLowerCase()?f.direction:"asc",onClick:()=>k(e.toLowerCase()),children:null===e||void 0===e?void 0:e.toUpperCase()})},t)))})}),(0,h.jsxs)(p.A,{className:"tble-body",children:[A&&(0,h.jsx)(l.A,{children:(0,h.jsx)(c.A,{colSpan:t.length,className:"middle-noData",children:(0,h.jsx)(u.A,{})})}),N.map(((e,t)=>(0,h.jsx)(l.A,{children:Object.keys(e).map(((a,o)=>["status","id","brokerId","fundAllocated","Record Id"].includes(a)?null:"grossFund"===a?(0,h.jsx)(c.A,{align:"center",sx:{minWidth:200,maxWidth:300,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"".concat(e.grossFund.toUpperCase()," | ").concat(e.grossFundInterest.toUpperCase()," | ").concat(e.grossFundSharing.toUpperCase())},"".concat(t,"-grossFund")):(0,h.jsx)(c.A,{align:"center",sx:{width:r[o]||"auto",minWidth:r[o]||150,maxWidth:r[o]||300,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"action"===a&&y?(0,h.jsx)(m.T,{isDisabled:3===e.status,onPress:()=>{return t=e.status,r=e.id,void(1===t?y(r):y());var t,r},children:1===e.status?"Release":"Released"}):e[a]},"".concat(t,"-").concat(o))))},t))),!A&&0===N.length&&(0,h.jsx)(l.A,{children:(0,h.jsx)(c.A,{colSpan:t.length,className:"middle-noData",align:"center",children:"No data found."})})]})]})})})}},4957:(e,t,r)=>{r.d(t,{A:()=>o});const a=r(9722).A.create({baseURL:"http://localhost:8000",timeout:5e3});a.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e)),(e=>(console.error("Request Interceptor Error:",e),Promise.reject(e)))),a.interceptors.response.use((e=>(console.log("Response Interceptor: Response received"),e)),(e=>(e.response&&401===e.response.status?(window.location.href="/",console.error("Response Interceptor: Unauthorized access - Redirecting to login")):console.error("Response Interceptor Error:",e.message),Promise.reject(e))));const o=a},8988:(e,t,r)=>{r.d(t,{A:()=>S});var a=r(45),o=r(9379),s=r(5043),n=r(8387),i=r(8610),l=r(1546),c=r(1475),d=r(2108),p=r(6262),u=r(8206),m=r(1347),h=r(408),v=r(5013),y=r(5849),A=r(2532);const x=(0,A.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const b=(0,A.A)("MuiListItemIcon",["root","alignItemsFlexStart"]);const g=(0,A.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);var j=r(2372);function f(e){return(0,j.Ay)("MuiMenuItem",e)}const I=(0,A.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var k=r(579);const N=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],w=(0,d.Ay)(h.A,{shouldForwardProp:e=>(0,c.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.divider&&t.divider,!r.disableGutters&&t.gutters]}})((0,p.A)((e=>{let{theme:t}=e;return(0,o.A)((0,o.A)({},t.typography.body1),{},{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(I.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,l.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(I.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,l.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(I.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,l.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,l.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(I.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(I.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(x.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(x.inset)]:{marginLeft:52},["& .".concat(g.root)]:{marginTop:0,marginBottom:0},["& .".concat(g.inset)]:{paddingLeft:36},["& .".concat(b.root)]:{minWidth:36},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return!t.dense},style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:t}=e;return t.dense},style:(0,o.A)((0,o.A)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2),{},{["& .".concat(b.root," svg")]:{fontSize:"1.25rem"}})}]})}))),S=s.forwardRef((function(e,t){const r=(0,u.b)({props:e,name:"MuiMenuItem"}),{autoFocus:l=!1,component:c="li",dense:d=!1,divider:p=!1,disableGutters:h=!1,focusVisibleClassName:A,role:x="menuitem",tabIndex:b,className:g}=r,j=(0,a.A)(r,N),I=s.useContext(m.A),S=s.useMemo((()=>({dense:d||I.dense||!1,disableGutters:h})),[I.dense,d,h]),C=s.useRef(null);(0,v.A)((()=>{l&&C.current&&C.current.focus()}),[l]);const D=(0,o.A)((0,o.A)({},r),{},{dense:S.dense,divider:p,disableGutters:h}),T=(e=>{const{disabled:t,dense:r,divider:a,disableGutters:s,selected:n,classes:l}=e,c={root:["root",r&&"dense",t&&"disabled",!s&&"gutters",a&&"divider",n&&"selected"]},d=(0,i.A)(c,f,l);return(0,o.A)((0,o.A)({},l),d)})(r),R=(0,y.A)(C,t);let B;return r.disabled||(B=void 0!==b?b:-1),(0,k.jsx)(m.A.Provider,{value:S,children:(0,k.jsx)(w,(0,o.A)((0,o.A)({ref:R,role:x,tabIndex:B,component:c,focusVisibleClassName:(0,n.A)(T.focusVisible,A),className:(0,n.A)(T.root,g)},j),{},{ownerState:D,classes:T}))})}))},8093:(e,t,r)=>{r.d(t,{A:()=>k});var a=r(9379),o=r(45),s=r(8610),n=r(8387),i=r(5043),l=r(408),c=r(9662),d=r(579);const p=(0,c.A)((0,d.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");var u=r(2108),m=r(6262),h=r(8206),v=r(6803),y=r(2532),A=r(2372);function x(e){return(0,A.Ay)("MuiTableSortLabel",e)}const b=(0,y.A)("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc","directionDesc","directionAsc"]);var g=r(4162);const j=["active","children","className","direction","hideSortIcon","IconComponent","slots","slotProps"],f=(0,u.Ay)(l.A,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.active&&t.active]}})((0,m.A)((e=>{let{theme:t}=e;return{cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(t.vars||t).palette.text.secondary},"&:hover":{color:(t.vars||t).palette.text.secondary,["& .".concat(b.icon)]:{opacity:.5}},["&.".concat(b.active)]:{color:(t.vars||t).palette.text.primary,["& .".concat(b.icon)]:{opacity:1,color:(t.vars||t).palette.text.secondary}}}}))),I=(0,u.Ay)("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,t["iconDirection".concat((0,v.A)(r.direction))]]}})((0,m.A)((e=>{let{theme:t}=e;return{fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter}),userSelect:"none",variants:[{props:{direction:"desc"},style:{transform:"rotate(0deg)"}},{props:{direction:"asc"},style:{transform:"rotate(180deg)"}}]}}))),k=i.forwardRef((function(e,t){const r=(0,h.b)({props:e,name:"MuiTableSortLabel"}),{active:i=!1,children:l,className:c,direction:u="asc",hideSortIcon:m=!1,IconComponent:y=p,slots:A={},slotProps:b={}}=r,k=(0,o.A)(r,j),N=(0,a.A)((0,a.A)({},r),{},{active:i,direction:u,hideSortIcon:m,IconComponent:y}),w=(e=>{const{classes:t,direction:r,active:a}=e,o={root:["root",a&&"active","direction".concat((0,v.A)(r))],icon:["icon","iconDirection".concat((0,v.A)(r))]};return(0,s.A)(o,x,t)})(N),S={slots:A,slotProps:b},[C,D]=(0,g.A)("root",{elementType:f,externalForwardedProps:S,ownerState:N,className:(0,n.A)(w.root,c),ref:t}),[T,R]=(0,g.A)("icon",{elementType:I,externalForwardedProps:S,ownerState:N,className:w.icon});return(0,d.jsxs)(C,(0,a.A)((0,a.A)((0,a.A)({disableRipple:!0,component:"span"},D),k),{},{children:[l,m&&!i?null:(0,d.jsx)(T,(0,a.A)({as:y},R))]}))}))}}]);
//# sourceMappingURL=295.2e201a31.chunk.js.map