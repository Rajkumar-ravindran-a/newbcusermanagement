"use strict";(self.webpackChunkbcusermanagement=self.webpackChunkbcusermanagement||[]).push([[295],{9295:(e,r,a)=>{a.r(r),a.d(r,{default:()=>C});var s=a(5043),t=a(3892),l=a(899),o=a(7392),n=a(7784),i=a(1787),d=a(7561),c=a(2268),m=a(8988),u=a(1906),h=a(7353),p=a(4449),x=a(5865),j=a(9190),A=a(4054),y=a(3934),g=a(8967),b=a(4957),v=a(7488),k=a(94),I=a(5394),N=a(5051),f=a(5732),D=a(247),S=a(5218),w=a(4051),R=a(579);const B=l.Ik().shape({brokerName:l.Yj().required("Broker Name is required"),id:l.Yj().required("ID is required"),startDate:l.p6().required("Start Date is required"),employee:l.Yj().required("Employee is required"),nism:l.Yj().required("NISM is required"),idType:l.Yj().required("ID Type is required")}),T=["Id","Broker Name","Start Date","Releases Date","Employee","Nism","IdType","Action"],C=()=>{const[e,r]=(0,s.useState)([]),[a,l]=(0,s.useState)(""),[C,E]=(0,s.useState)([]),[q,W]=(0,s.useState)([]),[P,Y]=(0,s.useState)(!1),[L,M]=(0,s.useState)(!1),[U,z]=(0,s.useState)([]),[O,V]=(0,s.useState)(null),[F,Q]=(0,s.useState)(!1),Z=async()=>{try{Q(!0);const e=await b.A.get("/getIds");if(200===e.status){const r=e.data.data.map((e=>({Id:e.idNumber,"Broker Name":e.brokerName,"Start Date":e.startDate,"Releases Date":e.releaseDate||"-","Record Id":e.recordId,Employee:(null===e||void 0===e?void 0:e.employeeId)||"-",Nism:e.nism,IdType:e.idType,Action:(0,R.jsxs)(f.A,{children:[(0,R.jsx)(D.b,{children:(0,R.jsx)(o.A,{children:(0,R.jsx)(N.txp,{})})}),(0,R.jsxs)(S.y,{"aria-label":"Action event example",onAction:r=>{"release"===r?K(e):"edit"===r&&J(e)},children:[(0,R.jsx)(w.Y,{isDisabled:3===e.status,children:"Release"},"release"),(0,R.jsx)(w.Y,{isDisabled:3===e.status,children:"Edit"},"edit")]})]})})));E(r),W(r),Q(!1)}}catch(e){Q(!1),v.oR.error("Error fetching ID data.")}},G=()=>Y(!0),H=()=>{Y(!1),M(!1),V(null)},J=e=>{V(e),M(!0),G()},K=async e=>{try{await b.A.put("/releaseId/".concat(e.recordId,"/3")),v.oR.success("Released Id: ".concat(e.recordId)),Z()}catch(r){v.oR.error("Error releasing broker.")}};(0,s.useEffect)((()=>{(async()=>{try{const e=await b.A.get("/users");200===e.status&&z(e.data)}catch(e){v.oR.error("Error fetching user data.")}})(),Z(),(async()=>{try{const a=await b.A.get("/getAllBroker");var e;200===a.status&&r(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data.filter((e=>1===e.status)))}catch(a){console.error(a),v.oR.error("Error fetching broker data.")}})()}),[]);const X={brokerName:(null===O||void 0===O?void 0:O.brokerId)||"",id:(null===O||void 0===O?void 0:O.idNumber)||"",startDate:(null===O||void 0===O?void 0:O.startDate)||"",employee:(null===O||void 0===O?void 0:O.employeeId)||"",nism:(null===O||void 0===O?void 0:O.nism)||"",idType:(null===O||void 0===O?void 0:O.idType)||""};return(0,R.jsxs)(g.A,{pageTitle:"ID Management",pageSubtitle:"Manage ID details",children:[(0,R.jsxs)(k.Z,{style:{marginTop:"1rem"},children:[(0,R.jsxs)("div",{className:"flex justify-between p-4 align-middle",children:[(0,R.jsxs)("div",{className:"flex gap-3",children:[(0,R.jsx)(n.A,{className:"searchUser",placeholder:"Search",InputProps:{startAdornment:(0,R.jsx)(i.A,{position:"start",children:(0,R.jsx)(I.zfp,{})})}}),(0,R.jsx)(d.A,{style:{minWidth:200,marginRight:"1rem"},children:(0,R.jsxs)(c.A,{value:a,onChange:e=>{const r=e.target.value;if(l(r),r){const e=C.filter((e=>e["Broker Name"]===r));W(e)}else W(C)},displayEmpty:!0,children:[(0,R.jsx)(m.A,{value:"",children:"All Brokers"}),e.map(((e,r)=>(0,R.jsx)(m.A,{value:e.brokerName,children:e.brokerName},r)))]})})]}),(0,R.jsx)(u.A,{onClick:G,variant:"contained",color:"primary",startIcon:(0,R.jsx)(I.QwN,{}),children:"Add ID"})]}),(0,R.jsx)(h.A,{mt:4,children:(0,R.jsx)(y.A,{title:T,tableData:q,loading:F})})]}),(0,R.jsx)(p.A,{open:P,onClose:H,children:(0,R.jsxs)(h.A,{className:"modal-box",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2,overflowY:"scroll"},children:[(0,R.jsx)(x.A,{variant:"h6",children:L?"Edit ID":"Add New ID"}),(0,R.jsx)(t.l1,{initialValues:X,validationSchema:B,onSubmit:async(e,r)=>{let{resetForm:a}=r;try{L?(await b.A.put("/updateId/".concat(O.recordId),e),v.oR.success("ID updated successfully.")):(await b.A.post("/createId",e),v.oR.success("ID added successfully.")),Z(),a(),H()}catch(s){v.oR.error("Error saving broker.")}},children:r=>{let{values:a,handleChange:s,errors:l,touched:o,handleBlur:i}=r;return(0,R.jsxs)(t.lV,{children:[(0,R.jsxs)("div",{className:"flex gap-2",children:[(0,R.jsx)(n.A,{fullWidth:!0,margin:"normal",name:"id",label:"ID",value:a.id||"",onChange:s,onBlur:i,error:o.id&&Boolean(l.id),helperText:o.id&&l.id}),(0,R.jsxs)(d.A,{fullWidth:!0,margin:"normal",error:o.brokerName&&Boolean(l.brokerName),children:[(0,R.jsx)(j.A,{id:"brokerName-label",children:"Broker Name"}),(0,R.jsx)(c.A,{labelId:"brokerName-label",id:"brokerName",name:"brokerName",label:"Broker Name",value:a.brokerName||"",onChange:s,onBlur:i,children:e.map(((e,r)=>(0,R.jsx)(m.A,{value:e.id,children:e.brokerName},r)))}),o.brokerName&&Boolean(l.brokerName)&&(0,R.jsx)(A.A,{children:l.brokerName})]})]}),(0,R.jsxs)("div",{className:"flex gap-2",children:[(0,R.jsx)(n.A,{fullWidth:!0,margin:"normal",name:"startDate",label:"Start Date",type:"date",InputLabelProps:{shrink:!0},value:a.startDate||"",onChange:s,onBlur:i,error:o.startDate&&Boolean(l.startDate),helperText:o.startDate&&l.startDate}),(0,R.jsxs)(d.A,{fullWidth:!0,margin:"normal",error:o.employee&&Boolean(l.employee),children:[(0,R.jsx)(j.A,{id:"employee-label",children:"Employee"}),(0,R.jsx)(c.A,{labelId:"employee-label",id:"employee",name:"employee",label:"Employee",value:a.employee||"",onChange:s,onBlur:i,children:U.map(((e,r)=>(0,R.jsx)(m.A,{value:e.id,children:e.firstName+" "+e.lastName},r)))}),o.employee&&l.employee&&(0,R.jsx)(A.A,{children:l.employee})]})]}),(0,R.jsxs)("div",{className:"flex gap-2",children:[(0,R.jsx)(n.A,{fullWidth:!0,margin:"normal",name:"nism",label:"NISM",value:a.nism||"",onChange:s,onBlur:i,error:o.nism&&Boolean(l.nism),helperText:o.nism&&l.nism}),(0,R.jsx)(n.A,{fullWidth:!0,margin:"normal",name:"idType",label:"ID Type",value:a.idType||"",onChange:s,onBlur:i,error:o.idType&&Boolean(l.idType),helperText:o.idType&&l.idType})]}),(0,R.jsxs)("div",{className:"flex justify-end gap-4 mt-6",children:[(0,R.jsx)(u.A,{variant:"contained",color:"error",onClick:H,children:"Cancel"}),(0,R.jsx)(u.A,{variant:"contained",color:"primary",type:"submit",children:L?"Update":"Add"})]})]})}})]})})]})}},3934:(e,r,a)=>{a.d(r,{A:()=>j});var s=a(5043),t=a(1596),l=a(9650),o=a(1806),n=a(4882),i=a(8076),d=a(39),c=a(8093),m=a(3460),u=a(1637),h=a(1463),p=a(728),x=a(579);const j=e=>{let{title:r=[],columnWidths:a=[],tableData:j=[],renderAction:A,loading:y}=e;const[g,b]=(0,s.useState)(0),[v,k]=(0,s.useState)(5),[I,N]=(0,s.useState)({key:"",direction:"asc"}),f=s.useMemo((()=>I.key?[...j].sort(((e,r)=>e[I.key]<r[I.key]?"asc"===I.direction?-1:1:e[I.key]>r[I.key]?"asc"===I.direction?1:-1:0)):j),[j,I]).slice(g*v,g*v+v);return(0,x.jsxs)(t.A,{className:"custom",children:[(0,x.jsx)(l.A,{children:(0,x.jsxs)(o.A,{className:"tble-custom",children:[(0,x.jsx)(n.A,{children:(0,x.jsx)(i.A,{children:r.map(((e,r)=>(0,x.jsx)(d.A,{align:"center",sx:{fontWeight:"bold",width:a[r]||"auto",minWidth:a[r]||150,maxWidth:a[r]||300},children:(0,x.jsx)(c.A,{active:I.key===e.toLowerCase(),direction:I.key===e.toLowerCase()?I.direction:"asc",onClick:()=>{return r=e.toLowerCase(),void N((e=>{const a=e.key===r&&"asc"===e.direction;return{key:r,direction:a?"desc":"asc"}}));var r},children:e})},r)))})}),(0,x.jsxs)(m.A,{children:[y&&(0,x.jsx)(i.A,{children:(0,x.jsx)(d.A,{colSpan:r.length,className:"middle-noData",children:(0,x.jsx)(u.A,{})})}),f.map(((e,r)=>(0,x.jsx)(i.A,{children:Object.keys(e).map(((s,t)=>["status","id","brokerId","fundAllocated","Record Id"].includes(s)?null:(0,x.jsx)(d.A,{align:"center",sx:{width:a[t]||"auto",minWidth:a[t]||150,maxWidth:a[t]||300,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"action"===s&&A?(0,x.jsx)(p.T,{isDisabled:3===e.status,onPress:()=>{return r=e.status,a=e.id,void(1===r?A(a):A());var r,a},children:1===e.status?"Release":"Released"}):e[s]},"".concat(r,"-").concat(t))))},r))),!y&&f&&0===f.length&&(0,x.jsx)(i.A,{children:(0,x.jsx)(d.A,{colSpan:r.length,className:"middle-noData",align:"center",children:"No data found."})})]})]})}),(0,x.jsx)(h.A,{component:"div",count:j.length,page:g,onPageChange:(e,r)=>{b(r)},rowsPerPage:v,onRowsPerPageChange:e=>{k(parseInt(e.target.value,10)),b(0)},rowsPerPageOptions:[5,10,15]})]})}},4957:(e,r,a)=>{a.d(r,{A:()=>t});const s=a(9722).A.create({baseURL:"http://43.204.150.47:8000",timeout:5e3});s.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e)),(e=>(console.error("Request Interceptor Error:",e),Promise.reject(e)))),s.interceptors.response.use((e=>(console.log("Response Interceptor: Response received"),e)),(e=>(e.response&&401===e.response.status?console.error("Response Interceptor: Unauthorized access - Redirecting to login"):console.error("Response Interceptor Error:",e.message),Promise.reject(e))));const t=s}}]);
//# sourceMappingURL=295.26accefd.chunk.js.map