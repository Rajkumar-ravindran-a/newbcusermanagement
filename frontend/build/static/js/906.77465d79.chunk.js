"use strict";(self.webpackChunkbcusermanagement=self.webpackChunkbcusermanagement||[]).push([[906],{7131:(e,s,r)=>{r.d(s,{A:()=>i});var a=r(4449),t=(r(5043),r(7353)),l=r(579);const n={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:"1rem"},i=e=>{let{open:s,handleClose:r,children:i}=e;return(0,l.jsx)(a.A,{open:s,onClose:r,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,l.jsx)(t.A,{sx:n,children:i})})}},9525:(e,s,r)=>{r.r(s),r.d(s,{default:()=>q});var a=r(5043),t=r(8967),l=r(1045),n=r(5865),i=r(1906),o=r(9650),d=r(1806),c=r(4882),m=r(8076),h=r(39),u=r(3460),x=r(7784),p=r(3691),j=r(579);const v={Active:"success",paused:"warning",deleted:"error"},b=[{name:"User ID",key:"id"},{name:"NAME",key:"name"},{name:"ROLE",key:"role"},{name:"STATUS",key:"userStatus"},{name:"ACTIONS",key:"actions"}],N=e=>{let{Userdata:s}=e;console.log("userData",s);const[r,t]=(0,a.useState)(1),[N,A]=(0,a.useState)(5),y=(r-1)*N,g=y+N,f=s.slice(y,g),w=(e,s)=>{var r,a;const t=e[s]||"N/A";switch(s){case"id":return(0,j.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.id});case"name":return(0,j.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,j.jsx)(l.A,{src:e.avatar,alt:e.firstName,style:{marginRight:"10px"},children:(null===(r=e.firstName)||void 0===r||null===(a=r.charAt(0))||void 0===a?void 0:a.toUpperCase())||""}),(0,j.jsxs)("div",{children:[(0,j.jsx)(n.A,{variant:"body1",children:e.firstName+" "+e.lastName}),(0,j.jsx)(n.A,{variant:"caption",color:"textSecondary",children:e.email})]})]});case"role":return(0,j.jsxs)("div",{children:[(0,j.jsx)(n.A,{variant:"body1",children:t}),(0,j.jsx)(n.A,{variant:"body2",color:"textSecondary",children:e.team})]});case"userStatus":return(0,j.jsx)(n.A,{variant:"body2",color:v[e.userStatus]||"textSecondary",children:t});case"actions":return(0,j.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,j.jsx)(i.A,{variant:"outlined",color:"primary",size:"small",children:"Details"}),(0,j.jsx)(i.A,{variant:"outlined",color:"secondary",size:"small",children:"Edit"}),(0,j.jsx)(i.A,{variant:"outlined",color:"error",size:"small",children:"Delete"})]});default:return t}};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(o.A,{children:(0,j.jsxs)(d.A,{sx:{minHidth:"650px"},"aria-label":"simple table",children:[(0,j.jsx)(c.A,{children:(0,j.jsx)(m.A,{children:b.map((e=>(0,j.jsx)(h.A,{style:{fontWeight:"bold",textTransform:"uppercase"},children:e.name},e.key)))})}),(0,j.jsx)(u.A,{children:f.length>0?f.map((e=>(0,j.jsx)(m.A,{hover:!0,children:b.map((s=>(0,j.jsx)(h.A,{children:w(e,s.key)},s.key)))},e.id))):(0,j.jsx)(m.A,{children:(0,j.jsx)(h.A,{colSpan:b.length,align:"center",style:{height:"200px"},children:"No data available"})})})]})}),(0,j.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"16px"},children:[(0,j.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,j.jsx)(n.A,{variant:"body2",children:"Rows per page:"}),(0,j.jsx)(x.A,{type:"number",value:N,onChange:e=>A(parseInt(e.target.value,10)||5),style:{width:"60px"},size:"small"})]}),(0,j.jsx)(p.A,{count:Math.ceil(s.length/N),page:r,onChange:(e,s)=>{t(s)},color:"primary"})]})]})};var A=r(7131),y=r(3892),g=r(899),f=r(7488),w=r(4957),S=r(5394),C=r(4673),k=r(1787),E=r(2147),I=r(8634),R=r(94);const q=()=>{const e=localStorage.getItem("token"),[s,r]=(0,a.useState)([]),[l,o]=(0,a.useState)(""),[d,c]=(0,a.useState)(!1),m=async()=>{try{const s=await w.A.get("/users",{headers:{Authorization:"bearer ".concat(e)}});200===s.status&&r(s.data)}catch(s){console.error("Error fetching users:",s)}};(0,a.useEffect)((()=>{m()}),[]);const h=s.filter((e=>{const s=l.toLowerCase();return e.firstName.toLowerCase().includes(s)||e.lastName.toLowerCase().includes(s)})),u=g.Ik({firstName:g.Yj().required("First Name is required"),lastName:g.Yj().required("Last Name is required"),email:g.Yj().email("Invalid email format").required("Email is required"),role:g.Yj().required("Role is required"),phonenumber:g.Yj().required("Mobile number is required"),password:g.Yj().required("Password is required")}),p=()=>{c(!d)};return(0,j.jsxs)(t.A,{pageTitle:"All users",pageSubtitle:"Manage user details",children:[(0,j.jsxs)(A.A,{open:d,handleClose:p,children:[(0,j.jsx)(n.A,{variant:"h6",className:"mb-2",children:"Add user"}),(0,j.jsx)(y.l1,{initialValues:{firstName:"",lastName:"",email:"",role:"",password:"",phonenumber:""},validationSchema:u,onSubmit:async s=>{try{200===(await w.A.post("/register",s,{headers:{Authorization:"bearer ".concat(e)}})).status&&(f.oR.success("User added successfully"),m(),c(!1))}catch(n){var r,a,t,l;console.error("Error adding user:",null===n||void 0===n||null===(r=n.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.detail),f.oR.error(null===n||void 0===n||null===(t=n.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.detail)}},children:e=>{let{errors:s,touched:r}=e;return(0,j.jsxs)(y.lV,{children:[(0,j.jsxs)("div",{className:"flex gap-4 mb-3",children:[(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)(y.D0,{name:"firstName",as:C.r,label:"First Name",placeholder:"Enter First Name"}),r.firstName&&s.firstName&&(0,j.jsx)("div",{className:"text-red-500 text-sm",children:s.firstName})]}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)(y.D0,{name:"lastName",as:C.r,label:"Last Name",placeholder:"Enter Last Name"}),r.lastName&&s.lastName&&(0,j.jsx)("div",{className:"text-red-500 text-sm",children:s.lastName})]})]}),(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)(y.D0,{name:"email",type:"email",as:C.r,label:"Email",placeholder:"Enter Your Email"}),r.email&&s.email&&(0,j.jsx)("div",{className:"text-red-500 text-sm",children:s.email})]}),(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)(y.D0,{name:"phonenumber",as:C.r,label:"Phone Number",placeholder:"Enter Phone Number"}),r.phonenumber&&s.phonenumber&&(0,j.jsx)("div",{className:"text-red-500 text-sm",children:s.phonenumber})]}),(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)(y.D0,{name:"role",as:E.d,label:"Role",placeholder:"Select Role",children:(0,j.jsx)(I.y,{children:"Employee"},"2")}),r.role&&s.role&&(0,j.jsx)("div",{className:"text-red-500 text-sm",children:s.role})]}),(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)(y.D0,{name:"password",type:"password",as:C.r,label:"Password",placeholder:"Enter Password"}),r.password&&s.password&&(0,j.jsx)("div",{className:"text-red-500 text-sm",children:s.password})]}),(0,j.jsxs)("div",{className:"mt-4 flex gap-4",children:[(0,j.jsx)(i.A,{type:"submit",className:"mr-3 submit-btn",variant:"contained",children:"Add User"}),(0,j.jsx)(i.A,{variant:"flat",onClick:p,children:"Cancel"})]})]})}})]}),(0,j.jsx)(R.Z,{className:"p-3 mt-4 userMainCard",children:(0,j.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,j.jsxs)("div",{className:"flex justify-between",children:[(0,j.jsx)(x.A,{className:"searchUser",placeholder:"Search",value:l,onChange:e=>o(e.target.value),InputProps:{startAdornment:(0,j.jsx)(k.A,{position:"start",children:(0,j.jsx)(S.zfp,{})})}}),(0,j.jsx)(i.A,{className:"h-5 mb-4 addUserButton",onClick:()=>p(),variant:"outlined",startIcon:(0,j.jsx)(S.QwN,{}),children:"Add New Employee"})]}),console.log(h),(0,j.jsx)(N,{Userdata:h})]})})]})}},4957:(e,s,r)=>{r.d(s,{A:()=>t});const a=r(9722).A.create({baseURL:"http://43.204.150.47:8000",timeout:5e3});a.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e)),(e=>(console.error("Request Interceptor Error:",e),Promise.reject(e)))),a.interceptors.response.use((e=>(console.log("Response Interceptor: Response received"),e)),(e=>(e.response&&401===e.response.status?console.error("Response Interceptor: Unauthorized access - Redirecting to login"):console.error("Response Interceptor Error:",e.message),Promise.reject(e))));const t=a}}]);
//# sourceMappingURL=906.77465d79.chunk.js.map